:root {
    --header-h: 80px;
}

body,
html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
}

.map-wrap {
    position: relative;
    width: 100%;
    height: 100%;
}

/* 지도 크기 */
#map {
    width: 100%;
    height: 100%;
    min-height: 600px;
}

/* ===== 왼쪽 슬라이드 사이드바 ===== */
.sidebar {
    --w: 330px;
    --handle: 25px;
    --gap: 5px;
    --shadow: 0 8px 24px rgba(0, 0, 0, .15);
    --collapsed-visible: calc(var(--handle) + var(--gap));
    position: absolute;
    top: calc(var(--header-h) + 10px);
    bottom: 10px;
    left: 15px;
    width: var(--w);
    background: #ffffff;
    box-shadow: var(--shadow);
    z-index: 10030;
    overflow: visible;
    transition: transform .28s ease, box-shadow .28s ease;
    display: flex;
    flex-direction: column;
}

/* 접힌 상태: 본체는 왼쪽으로 빠지되, 핸들은 남김 */
.sidebar.is-collapsed {
    /* transform: translateX(calc(-100%)); */
    transform: translateX(calc(-100% - 15px));
}

/* ===== 슬라이드 내용 감싼 부분 ===== */
.sidebar__content {
    flex: 1;
    /* 남는 높이를 전부 차지 */
    overflow-y: auto;
    /* 세로 스크롤만 */
    padding: 13px 16px;
    box-sizing: border-box;
}

/* ===== 핸들(토글 버튼) ===== */
.sidebar__handle {
    position: absolute;
    top: 6px;
    right: calc(-1 * (var(--handle) + var(--gap) + 3px));
    transform: none;
    width: var(--handle);
    height: var(--handle);
    border: none;
    background: #B1B1B1;
    /* 상단 네이비 톤과 비슷하게 */
    color: #fff;
    /* 사각 버튼 느낌 */
    cursor: pointer;
    box-shadow: var(--shadow);
    display: grid;
    place-items: center;
}

/* 화살표(▶ / ◀ 모양) */
.sidebar__handle .chevron {
    display: inline-block;
    width: 0;
    height: 0;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-left: 6px solid #fff;
    /* 기본은 ▶ */
    transition: transform .28s ease;
}

/* 펼쳐졌을 때는 ◀처럼 보이도록 회전 */
.sidebar:not(.is-collapsed) .sidebar__handle .chevron {
    transform: rotate(180deg);
}

/* 사이드바 상단 회색 박스 */
.sidebar__topbox {
    width: 100%;
    height: 35px;
    background-color: #D9D9D9;
    display: flex;
    align-items: center;
    gap: 0;
    box-sizing: border-box;
    flex: 0 0 auto;
    position: relative;
    overflow: visible;
    z-index: 6000;
}

/* 아이콘 래퍼(button) */

.iconwrap {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 0 13px;
    border: none;
    border-radius: 0;
    background: none;
    cursor: pointer;
    z-index: 7000;
    transition: background-color .2s ease;
}

/* 활성화 상태일 때의 스타일 */
.iconwrap.is-active {
    background-color: #a0a0a0;
    /* 진한 회색 배경색 */
    box-shadow: 0 2px 6px rgba(0, 0, 0, .08);
}

/* 실제 아이콘 이미지 */
.sidebar__icon {
    width: 20px;
    height: 20px;
    object-fit: contain;
    opacity: .6;
    transition: opacity .2s;
    pointer-events: none;
    /* 클릭은 래퍼가 받도록 */
}

.iconwrap:hover .sidebar__icon {
    opacity: 1;
}

.iconwrap.is-active .sidebar__icon {
    opacity: 1;
}

/* 말풍선 본체(래퍼에 data-tip) */

.iconwrap[data-tip]::after {
    content: attr(data-tip);
    position: absolute;
    bottom: 100%;
    left: 10%;
    transform: translate(-50%, -2px);
    /* 툴팁을 아이콘 중앙에 위치시킴 */
    background: #fff;
    color: rgba(45, 55, 72, 0.9);
    border: 1px solid rgba(229, 231, 235, 0.6);
    border-radius: 6px;
    padding: 4px 8px;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    box-shadow: 0 4px 8px rgba(0, 0, 0, .08);
    opacity: 0;
    pointer-events: none;
    transition: opacity .15s ease, transform .15s ease;
    z-index: 10050;
}

.iconwrap.port[data-tip]::after {
    left: 8%;
    transform: translate(-50%, -2px);
    /* 툴팁을 아이콘 중앙에 위치시킴 */
}

.iconwrap.time[data-tip]::after {
    left: 20%;
    transform: translate(-50%, -2px);
    /* 툴팁을 아이콘 중앙에 위치시킴 */
}


/* hover 시 표시 */
.iconwrap[data-tip]:hover::after {
    opacity: 1;
    transform: translate(-50%, -4px);
}

.iconwrap[data-tip]:hover::before {
    opacity: 1;
}

/* 우상단: 줌 컨트롤과 라인 맞추기 */
.map-icon-ctrl {
    position: absolute;
    top: calc(var(--header-h) + 30px);
    right: 18px;
    display: inline-flex;
    flex-direction: column;
    gap: 6px;
    /* 버튼 간격 */
    padding: 5px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(6px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, .16);
    z-index: 10040;
}

/* 아이콘 버튼: Mapbox 줌버튼과 비슷한 크기(30x30) */
.map-icon-ctrl .iconbtn {
    width: 30px;
    height: 30px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    background: #ffffff;
    display: grid;
    place-items: center;
    cursor: pointer;
    padding: 0;
    outline: none;
    transition: background .15s ease, box-shadow .15s ease, border-color .15s ease;
}

.map-icon-ctrl .iconbtn:hover {
    background: #f3f6fb;
    box-shadow: 0 2px 6px rgba(0, 0, 0, .08);
}

/* 활성(ON) 상태: 파란 배경 + 아이콘 반전 */
.map-icon-ctrl .iconbtn.is-on {
    background: #013895;
    border-color: #013895;
}

.map-icon-ctrl .iconbtn img {
    width: 18px;
    /* 아이콘 크기 */
    height: 18px;
    object-fit: contain;
    pointer-events: none;
    transition: filter .15s ease, opacity .15s ease;
}

/* 활성일 때 아이콘을 흰색으로 보이게 */
.map-icon-ctrl .iconbtn.is-on img {
    filter: brightness(0) invert(1);
    /* 검정 아이콘 → 흰색 */
}

/* 모바일 살짝 줄이기 */
@media (max-width: 640px) {
    .map-icon-ctrl {
        right: 10px;
        top: 10px;
        padding: 5px;
        gap: 5px;
    }

    .map-icon-ctrl .iconbtn {
        width: 28px;
        height: 28px;
        border-radius: 7px;
    }

    .map-icon-ctrl .iconbtn img {
        width: 16px;
        height: 16px;
    }
}

/* 툴팁 기본 숨김 */
.map-icon-ctrl .iconbtn[data-tip] {
    position: relative;
}

.map-icon-ctrl .iconbtn[data-tip]::after {
    content: attr(data-tip);
    position: absolute;
    top: 50%;
    right: 100%;
    /* 버튼 왼쪽 */
    transform: translateY(-50%) translateX(-6px);
    background: rgba(255, 255, 255, 0.85);
    color: rgba(45, 55, 72, 0.9);
    border: 1px solid rgba(229, 231, 235, 0.6);
    border-radius: 6px;
    padding: 4px 8px;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.15s ease, transform 0.15s ease;
    z-index: 10;
}

/* hover 시 툴팁 표시 */
.map-icon-ctrl .iconbtn[data-tip]:hover::after {
    opacity: 1;
    transform: translateY(-50%) translateX(-10px);
}

/* ========= 슬라이드 내용 ========= */
/*[hidden] 속성을 부여한 패널은 완전히 숨김*/
.panel[hidden] {
    display: none !important;
}

/* 1번 + 2번 슬라이드 공통 모든 패널의 기본 상태: 보이지 않음. */
.panel {
    display: none;
    flex: 1 1 auto;
    overflow: hidden;
}

/* 1번 + 2번 슬라이드 클릭 */
.panel.is-active {
    display: flex;
    flex-direction: column;
}

.panel--predict .sidebar__content {
    flex: 1 1 auto;
    overflow-y: auto;
}

/* 로그 패널 비활성화 시 숨김 */
.panel.panel--log:not(.is-active) {
    display: none;
}

/* 로그 패널 활성화 시 표시 */
.panel.panel--log.is-active {
    display: flex;
    flex-direction: column;
}

.panel--log .sidebar__bottombox,
.panel--map .sidebar__bottombox {
    display: none;
}

/* title 문구(차항지 예측) */
.sidebar__title {
    margin: 13px 16px;
    font-size: 15px;
    font-weight: 600;
}

/* select + input */
.sidebar__section {
    margin: 10px 20px;
    --w: 142px;
    --h: 30px;
    --px: 12px;
    /* 좌우 패딩 */
    --py: 4px;
    /* 상하 패딩 */
    --radius: 5px;
    --font: 14px;
    --border: #524F4F;
}

/* ===== Select ===== */
.cselect {
    --bg: #fff;
    --text: #333;
    --hover: #e6f3f3;
    --caret-box: 16px;
    /* 오른쪽 작은 네모(케럿 박스) 한 변 길이 */
    --caret-gap: 10px;
    /* 라벨과 케럿 사이 간격 */
    --tri-w: 8px;
    /* ▼ 삼각형 너비 */
    --tri-h: 5px;
    /* ▼ 삼각형 높이 */
    --menu-maxh: 220px;
    /* 드롭다운 최대 높이 */
    --option-font: 14px;
    /* 옵션 폰트 크기 */
    --option-py: 8px;
    /* 옵션 상하 패딩 */
    --option-px: 12px;
    /* 옵션 좌우 패딩 */

    position: relative;
    width: var(--w);
    box-sizing: border-box;
}

/* 닫힌 상태의 컨트롤(라벨 영역) */
.cselect__control {
    width: 100%;
    min-height: var(--h);
    height: var(--h);
    line-height: calc(var(--h) - 2px);
    /* 텍스트 수직 시각 균형(보더 고려) */
    padding: var(--py) var(--px);
    /* input과 동일 패딩 */
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: var(--bg);
    color: var(--text);
    font-weight: 500;
    font-size: var(--font);
    /* input과 동일 폰트 */
    display: inline-flex;
    align-items: center;
    /* 내부 수직정렬 */
    justify-content: space-between;
    /* 텍스트-케럿 간 배치 */
    gap: 8px;
    /* 텍스트와 케럿 사이 안전 여백 */
    cursor: pointer;
    box-sizing: border-box;
}

/* 열렸을 때: 아래 모서리 펼치기 위해 하단 라운드 제거 */
.cselect.is-open .cselect__control {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

/* 오른쪽 작은 네모(케럿 박스) */
.cselect__caret {
    position: relative;
    width: var(--caret-box);
    height: var(--caret-box);
    margin-left: var(--caret-gap);
    border: 1px solid var(--border);
    border-radius: 4px;
    background: #fff;
}

/* 케럿의 ▼ 모양 */
.cselect__caret::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: var(--tri-w);
    height: var(--tri-h);
    background: #2b2f3a;
    transform: translate(-50%, -50%);
    clip-path: polygon(0 0, 100% 0, 50% 100%);
    border-radius: 2px;
    /* 꼭짓점 살짝 둥글게 */
}

/* 드롭다운 메뉴 */
.cselect__menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg);
    border: 1px solid var(--border);
    border-top: none;
    /* 컨트롤과 연결 */
    border-bottom-left-radius: var(--radius);
    border-bottom-right-radius: var(--radius);
    box-shadow: 0 6px 18px rgba(0, 0, 0, .08);
    max-height: var(--menu-maxh);
    overflow: auto;
    list-style: none;
    margin: 0;
    padding: 0;
    display: none;
    /* 기본 숨김 */
    z-index: 20;
}

/* 열렸을 때 메뉴 보이기 */
.cselect.is-open .cselect__menu {
    display: block;
}

/* 옵션 항목 */
.cselect__option {
    padding: 8px 12px;
    /* 옵션 패딩은 고정(원하면 var(--option-py/px)로 바꿔도 됨) */
    cursor: pointer;
    font-weight: 400;
    color: var(--text);
    white-space: nowrap;
    font-size: var(--font);
    /* 공통 폰트로 통일 */
}

/* 옵션 호버 */
.cselect__option:hover {
    background: var(--hover);
}

/* 마지막 옵션과 메뉴 하단 라운드 일치 */
.cselect__option:last-child {
    border-bottom-left-radius: var(--radius);
    border-bottom-right-radius: var(--radius);
}

/* ───────────────── Input ───────────────── */
.sidebar__input {
    box-sizing: border-box;
    width: var(--w);
    /* select와 동일 폭 */
    height: var(--h);
    /* select와 동일 높이 */
    padding: var(--py) var(--px);
    /* select와 동일 패딩 */
    border: 1px solid var(--border);
    border-radius: var(--radius);
    outline: none;
    background: var(--bg);
    color: var(--text);
    font-size: var(--font);
    /* 공통 폰트 */

    /* 비어있을 때 placeholder 중앙 정렬 */
    text-align: center;
    margin-bottom: 3px;
    margin-right: 3px;
}

/* placeholder 스타일 */
.sidebar__input::placeholder {
    font-weight: 500;
    color: rgba(0, 0, 0, 0.3);
    font-size: var(--font);
    /* 16px 고정 → 공통 폰트로 통일 */
}

/* 포커스되면 placeholder 숨기고 왼쪽 정렬 + 들여쓰기 */
.sidebar__input:focus {
    text-align: left;
    text-indent: 1ch;
}

.sidebar__input:focus::placeholder {
    opacity: 0;
}

/* 값이 입력된 상태에서도 왼쪽 + 들여쓰기 유지 */
.sidebar__input:not(:placeholder-shown) {
    text-align: left;
    text-indent: 0;
}

/* 조회 버튼 전, 고정영역만 보이는 경우 */
.is-hidden {
    display: none !important;
}

/* 조회 후 입력창 완전 잠금 */
.sidebar__input.is-locked {
    pointer-events: none;
    /* 클릭/포커스 자체 차단 */
    user-select: none;
    /* 드래그/선택 금지 */
    caret-color: transparent;
    /* 커서 숨김 */
    cursor: not-allowed;
    /* 커서 금지 표시 */
}

/* 초기화 btn */
.sidebar__btn {
    height: var(--h);
    flex: 0 0 60px;
    background: #B0B0B0;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 1px 1px 1px 0 rgba(0, 0, 0, 0.25);
    font-size: 14px;
    font-weight: 600;
    box-sizing: border-box;
}

/* 조회 btn */
.sidebar__btn.primary {
    background: #013895;
    border: none;
    color: #fff;
}

/* 버튼 간격 */
.sidebar__row {
    display: flex;
    gap: 11px;
}

/* 슬라이드 바_선박 정보, 예측 결과 */
.sidebar__sub {
    font-size: 15px;
    color: #333;
    font-weight: 600;
    margin: 0;
}

/* 선박 사진 */
.vessel_image {
    display: block;
    /* inline → block으로 */
    margin: 12px auto 2px;
    max-width: 260px;
    width: 100%;
    aspect-ratio: 98 / 55;
    /* 원본 비율 유지 */
    height: auto;
    /* 세로 자동 계산 */
    border-radius: 10px;
    /* 피그마 설정 */
    object-fit: cover;
    /* 사진 잘림 없이 비율 유지 */
}

/* 선박 정보 content */
.kv {
    display: flex;
    /* span, strong 좌우 배치*/
    justify-content: space-between;
    padding: 10px 16px 6px 16px;
    border-bottom: 1px dashed #eee;
    /* 아래 점선 표시*/
}

/* 작은 글씨 */
.kv span {
    color: #666;
    font-size: 12px;
}

/* 굵은 글씨 */
.kv strong {
    font-size: 13px;
}

.sidebar__predict h3.sidebar__sub {
    margin: 15px 0 10px 0;
}


/* 카드 패딩값 변수로 잡아두기 */
.box {
    --pad: 10px;
    border: 1px solid #524F4F;
    border-radius: 10px;
    position: relative;
    padding: var(--pad);
    margin: 12px auto 0;
    width: 260px;
    box-sizing: border-box;
    /* 패딩 포함해서 238px 유지 */
    box-shadow: 1px 1px 1px 0 rgba(0, 0, 0, 0.25);
    cursor: pointer;
    transition: transform 0.2s ease-in-out;
}

.box:hover {
    transform: scale(1.02);
}

/* 헤더: 가운데 정렬, 간격 축소 */
.box__head {
    display: flex;
    justify-content: center;
    align-items: baseline;
    gap: 12px;
    margin-bottom: 10px;
}

.box__head .head__label {
    color: #0f3c9a;
    font-weight: 600;
    font-size: 19px;
}

.box__head strong {
    color: #000;
    font-weight: 600;
    font-size: 19px;
}

/* 본문 중앙 정렬 */
.box__body {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.box.one .head__label,
.box.one .route b.last {
    color: #0f3c9a;
    /* 파란색 유지 */
}

.box.one .route__bg {
    background: rgba(230, 243, 243, 0.5);
    /* 기존 연한 하늘색 */
}

/* === Top2 (연두색 + 초록색 글씨) === */
.box.two .head__label,
.box.two .route b.last {
    color: #4F6F52;
    /* 진한 초록 */
}

.box.two .route__bg {
    background: #E3F2E1;
    /* 연한 연두색 */
}

.box.three .route__bg {
    background: #F2F2F2;
}

.box.three .head__label,
.box.three .route b.last {
    color: #708090;
}



/* ── 가운데 연두색 밴드 ── */
.route__bg {
    position: relative;
    left: calc(-1 * var(--pad));
    /* 좌측 패딩 만큼 당김 */
    width: calc(100% + (var(--pad) * 2));
    /* 패딩 당긴 만큼 폭 확장 */
    padding: 8px 12px;
    box-sizing: border-box;
    align-self: stretch;
    /* flex 줄임 방지 */
    margin-bottom: 12px;
}

/* 출발 >> 도착 줄 */
.route {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    /* 좌/화살표/우 */
    align-items: center;
    /* 세로 중앙 정렬 */
    column-gap: 4px;
    /* 기존 17px → 여유 확보 */
    margin: 0;
    color: #524F4F;
    min-width: 0;
}

.route>div {
    text-align: center;
    min-width: 0;
    container-type: inline-size;
    /* ← cqw를 쓰기 위한 선언 */
}

/* 영문 항구 표시 2개 */
.route b {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    font-size: 20px;
    font-weight: 650;
    margin-bottom: 4px;
}

/* KRBUS */
.route b:first-child {
    color: #000;
}

.route .arrow {
    grid-column: 2;
    justify-self: start;
    /* ★ 이 줄을 추가합니다. */
    align-self: start;
    text-align: left;
    font-size: clamp(18px, 6vw, 34px);
    color: #6e767e;
    line-height: 1;
    margin-right: 10px;
    margin-bottom: 10px;
}

/* 한국 / 부산 + 목적항 한국어 */
.route .sub {
    font-weight: 450;
    color: #6c757d;
    white-space: nowrap;
}

/* 한국 / 부산 만 */
.route .sub:not(.dest) {
    font-size: 12px;
    /* 원하는 고정값 */
    overflow: hidden;
    /* 혹시 몰라서 안전장치 */
    text-overflow: ellipsis;
}

.route .sub.dest {
    /* 컨테이너 너비에 맞춰 글자 크기 자동 조절, 줄바꿈/생략 없음 */
    font-size: clamp(5px, 16cqw, 12px);
}

/* ETA 라인 */
.box .eta__time {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    font-size: 16px;
    font-weight: 500;
    color: #111;
    width: 100%;
}

/* ETA pill */
.box .pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 14px;
    border-radius: 999px;
    border: 1px solid #d0d6dc;
    background: #fff;
    font-weight: 600;
    font-size: 14px;
    line-height: 1;
}

/* 하단 회색 box */
.sidebar__bottombox {
    width: 100%;
    height: 35px;
    background-color: #D9D9D9;
    display: flex;
    align-items: center;
    box-sizing: border-box;
    flex: 0 0 auto;
    justify-content: flex-end;
    margin-top: auto;
}

/* 결과 저장 btn */
.sidebar__btn.save {
    flex: 0 0 auto;
    width: auto;
    display: inline-block;
    /* 버튼이 내용만큼 차지하도록 */
    background: #013895;
    color: #fff;
    margin-right: 20px;
    padding: 2px 6px;
}

/* ===== 2) 슬라이드_시점별 타임라인 (왼쪽 고정 컬럼 + 점선 + 원형) ===== */

/* 로그 패널 헤더 */
.panel.panel--log .sidebar__header {
    position: relative;
    /* sticky는 flexbox 레이아웃과 충돌하여 제거 */
    z-index: 1;
    /* 다른 요소와 겹침 방지 */
    background-color: #ffffff;
    flex-shrink: 0;
    /* 헤더 크기 고정 */
}

/* 로그 패널 제목 */
.sidebar__secondtitle {
    margin: 20px 0 20px 16px;
    font-size: 15px;
    font-weight: 600;
}

.secondtitle_hr {
    margin-top: 10px;
    width: 100%;
}

/* 로그 패널 콘텐츠 */
.panel.panel--log .sidebar__content {
    padding: 10px 16px;
    /* 헤더와의 간격을 위해 패딩 조정 */
    /* flex: 1; 와 overflow-y: auto; 는 .sidebar__content 기본 스타일에서 상속받아 스크롤 기능이 유지됩니다. */
}


.panel.panel--log {
    --node: 45px;
    --ring: 7px;
    --gutter: 100px;
    --pad: 16px;
    --line-x: 48px;
    --pill-h: 24px;
    --chip-h: var(--pill-h);
    --col-gap: 12px;
    --font: 12px;
    padding: 0;
    --label-col: 68px;
    /* ↓ 마지막 원 아래로 더 내려가는 점선 길이 보정값(필요시 0~8px 정도 조절) */
    --line-trim: 6px;
}

/* 왼쪽에 전용 컬럼 확보 */
.voy-timeline {
    list-style: none;
    padding-left: calc(var(--pad) + var(--node) + var(--col-gap));
    position: relative;
    margin: 0;
    padding-bottom: 0;
}

/* 세로 점선(왼쪽 컬럼 중앙쯤) */
.voy-timeline::before {
    content: "";
    position: absolute;
    left: calc(var(--pad) + (var(--node) / 2));
    /* 시작점: 첫 번째 원 중앙 */
    top: calc(var(--node) / 2);
    /* 끝점: 컨테이너 바닥에서 '마지막 원의 반지름 + 보정'만큼 위 */
    bottom: calc((var(--node) / 2) + var(--line-trim));
    border-right: 2px dotted #7FC7D9;
    opacity: .9;
    z-index: 0;
}

/* 각 섹션 */
.voy-item {
    position: relative;
}

/* 원형 노드: 점선 위에 겹치도록 배치 */
.voy-node {
    border: none;
    position: absolute;
    left: 0;
    /* 점선 위치로 이동 */
    top: 0;
    width: var(--node);
    height: var(--node);
    border-radius: 50%;
    display: grid;
    place-items: center;
    background: #e6ebf0;
    box-shadow: inset 0 0 0 var(--ring) rgba(0, 0, 0, .06);
    z-index: 1;
    /* 점선 위로 */
    padding: 0;
    line-height: 0;
    box-sizing: content-box;
    transform: translateX(calc(-1 * (var(--col-gap) + (var(--node)/2)) - 21px)) scale(var(--pop, 1));
    transition: background .18s ease, box-shadow .18s ease, transform .18s ease;
}

/* 활성: 그림자 제거 + 단색(원하면 색 바꿔도 됨) */
.voy-node.is-active {
    background: #cfeeff;
    /* 단색 배경 */
    box-shadow: none;
    /* 링 제거 */
    --pop: 1.04;
}

/* 클릭 애니메이션(팝)용 클래스 */
.voy-node.is-pop {
    --pop: 1.10;
}

/* 아이콘 크기 */
.voy-node img {
    width: 35px;
    height: 35px;
}

.voy-node img[alt="출발항 아이콘"] {
    width: 30px;
    height: 30px;
    display: block;
    object-fit: contain;
    /* 비율 유지 */
    margin: 0;
}

.voy-node span {
    display: grid;
    place-items: center;
    width: calc(var(--node) * 0.80);
    height: calc(var(--node) * 0.80);
    border-radius: 50%;
    color: #fff;
    font-weight: 700;
    font-size: calc(var(--font) + 2px);
    background: #D9D9D9;
    /* 기본 회색 */
}

.voy-node.is-active img {
    filter: brightness(0) saturate(100%) invert(11%) sepia(97%) saturate(5813%) hue-rotate(210deg) brightness(95%) contrast(101%);
}

/* 접근성: 동작 줄이기 선호 시 확대 애니메이션 비활성화 */
@media (prefers-reduced-motion: reduce) {
    .voy-node {
        transition: background .18s ease, box-shadow .18s ease;
    }

    .voy-node:active,
    .voy-node.is-pop {
        --pop: 1;
    }
}

/* 시점별 예측 타임라인 */
.voy-rows,
.voy-row {
    width: 100%;
}

.voy-rows {
    margin: 15px 0 20px 11px;
}

/* 한 줄(버튼 + 값칩) : 콘텐츠는 왼쪽 패딩 이후부터 배치 */
.voy-row {
    position: relative;
    height: 48px;
    display: flex;
    height: 36px;
}

/* 마지막 아이템 아래 여백 제거(점선 더 짧게) */
.voy-item:last-child .voy-rows {
    margin-bottom: 0;
}

/* 소제목 */
.voy-label {
    margin: 10px 0;
    color: #2b2f3a;
    font-weight: 700;
    font-size: calc(var(--font) + 2px);
}

/* 항구명 + % */
.voy-chip {
    margin-left: 10px;
    height: var(--pill-h);
    width: 130px;
    text-align: left;
    /* 텍스트를 왼쪽 정렬 */
    border-radius: 6px;
    background: #eef3f7;
    padding: 0 8px;
    display: inline-flex;
    align-items: center;
    font-size: var(--font);
    font-weight: 600;
    color: #374151;
    white-space: nowrap;
    overflow: hidden;
    box-sizing: border-box;
    /* max-width는 width가 고정되므로 삭제합니다. */
}

/* top- 1*/
.pillbtn,
.depart_pillbtn,
.now_pillbtn {
    /* Added .now_pillbtn here */
    height: var(--pill-h);
    width: 53px;
    /* 너비를 53px로 고정 */
    text-align: center;
    /* 텍스트를 가운데 정렬 */
    padding: 0 6px;
    white-space: nowrap;
    border-radius: 8px;
    border: 1.5px solid #cfd8e3;
    background: #fff;
    color: #3a4a5b;
    font-weight: 700;
    font-size: var(--font);
    letter-spacing: .3px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.voy-timeline .voy-item:not(:first-child) .voy-rows .voy-row:nth-of-type(2) .pillbtn,
.voy-timeline .voy-item:not(:first-child) .voy-rows .voy-row:nth-of-type(2) .voy-chip {
    color: #013895;
    font-size: calc(var(--font) + 1px);
}

/* (Top 버튼은 색 토글 안 씀 — 그대로 유지) */
/* ===== 저장 확인 모달 ===== */
.modal {
    position: fixed;
    inset: 0;
    display: none;
    z-index: 10040;
}

.modal.is-open {
    display: block;

}

.modal__bg {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, .28);
    backdrop-filter: blur(2px);
}

.modal__dialog {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    min-width: 150px;
    max-width: 90vw;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, .2);
    padding: 14px 16px 14px;
    text-align: center;
}

.modal__title {
    font-size: 16px;
    font-weight: 700;
    color: #111;
}

.modal__actions {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin: 10px 40px 5px 40px;
}

.modal__btn {
    min-width: 72px;
    height: 34px;
    padding: 0 12px;
    border-radius: 8px;
    border: 1px solid #E5E7EB;
    background: #fff;
    font-weight: 600;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 1px 1px 1px 0 rgba(0, 0, 0, 0.25);
}



.modal__btn.primary {
    background: #013895;
    color: #fff;
    border-color: #013895;
    cursor: pointer;
}


/* ── 목적항 Hover, 박스 내용 ───────────────────────────── */
.port-hover-card {
    min-width: 160px;
    max-width: 208px;
    background: #fff;
    border-radius: 9.6px;
    box-shadow: 0 9.6px 22.4px rgba(0, 0, 0, .18);
    border: 0.8px solid rgba(2, 32, 71, .064);
    overflow: visible;
    /*내용이 카드 밖으로 넘치지 않게*/
    font-family: inherit;
    color: #0b1736;
    position: relative;
}

/* 카드 상단 제목 영역 (항구명) */
.port-hover-card__hd {
    padding: 6px 11.2px 4px;
    font-weight: 700;
    font-size: 14.4px;
    letter-spacing: .16px;
    /*글자 간격 조정*/
    color: #0b1736;
}

/*제목과 내용 구분하는 가로 줄*/
.port-hover-card__divider {
    height: 0.8px;
    background: rgba(2, 32, 71, .064);
    margin: 0 9.6px;
}

/*카드 본문(내용) 영역 전체*/
.port-hover-card__bd {
    padding: 6px 8px 6px;
    display: grid;
    grid-template-columns: 1fr;
    gap: 4px;
}

/*한 줄 정보(아이콘, 라벨, 값) 묶음*/
.port-row {
    display: grid;
    grid-template-columns: 17.6px 1fr auto;
    align-items: center;
    column-gap: 8px;
    font-size: 11.2px;
}

/* 줄 왼쪽 동그란 아이콘*/
.port-row__icon {
    width: 17.6px;
    height: 17.6px;
    display: grid;
    place-items: center;
    border-radius: 999px;
    background: #eef3ff;
    color: #0f3c9a;
    font-size: 10.4px;
}

/*정보 라벨(예: "바람", "날씨")*/
.port-row__label {
    color: #2a3447;
    font-weight: 700;
}

/*정보 값(예: "3.2 m/s · 180° (S)")*/
.port-row__val {
    color: #0b1736;
    font-weight: 700;
}

/* 작은 보조 텍스트 "(S)",
 "(UTC+3)" */
.subtle {
    color: #5b6474;
    font-weight: 600;
    font-size: 9.6px;
}

/* Mapbox 기본 팝업 틀 숨기기 */
.mapboxgl-popup-content {
    background: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    border-radius: 0 !important;
}

.mapboxgl-popup-tip {
    display: none !important;
    /* 기본 세모도 숨김 */
}

/* 카드 아래 세모 */
.port-hover-card::after {
    content: '';
    position: absolute;
    bottom: -6.4px;
    /* 카드 밑으로 조금 나오게 */
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6.4px solid transparent;
    border-right: 6.4px solid transparent;
    border-top: 6.4px solid #fff;
    /* 카드 배경색과 동일하게 */
}

/* 부산항 호버 카드 전용 스타일 */
.busan-popup-container {
    z-index: 10060;
}

.busan-hover-card {
    min-width: auto !important;
    /* min-width를 무효화하여 max-width가 적용되게 합니다. */
    max-width: 80px !important;
}

.busan-hover-card .port-hover-card__hd {
    font-size: 14px;
    padding: 6px 8px;
    text-align: center;
}

/* 부산항 팝업 컨테이너의 최대 너비를 강제 적용 */
.busan-popup-container .mapboxgl-popup-content {
    max-width: 90px !important;
}

/* 팝업 카드 */

.marine-popup {
    z-index: 10000;
}

.marine-popup .marine-popup-content {
    width: 180px;
    background: #ffffff;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(2, 8, 23, 0.12);
    overflow: hidden;
    font-family: 'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color: #0f172a;
}

.marine-popup .marine-popup-header {
    width: 180px;
    display: flex;
    align-items: center;
    gap: 5px;
    background: #013895;
    cursor: pointer;
    color: #fff;
    padding: 10px 8px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}

.marine-popup .marine-popup-header .ico {
    width: 18px;
    height: 18px;
}

.marine-popup .marine-popup-header .title {
    font-size: 15px;
    font-weight: 700;
    text-align: left;
}

.marine-popup .marine-popup-body {
    padding: 2px 10px;
}

/* 행 */
.marine-popup .marine-popup-row {
    display: grid;
    grid-template-columns: auto 1fr auto;
    /* 라벨, 값, 보조값/이모지 */
    align-items: baseline;
    gap: 8px;
    padding: 4px 0;
    border-bottom: 1px solid #f1f5f9;
}

.marine-popup .marine-popup-row:last-child {
    border-bottom: 0;
}

/* 라벨 */
.marine-popup .label {
    font-size: 12px;
    font-weight: 600;
    color: #334155;
}

/* 값 */
.marine-popup .value {
    font-size: 13px;
    font-weight: 500;
    color: #0f172a;
    text-align: right;
}

/* 보조 텍스트 (방향 등) */
.marine-popup .sub-value {
    font-size: 11px;
    font-weight: 400;
    color: #64748b;
    text-align: right;
    white-space: nowrap;
}

/* 이모지 */
.marine-popup .emoji {
    font-size: 14px;
    text-align: right;
}

.congestion-marker {
    border-radius: 50%;
    /* 원형 */
    border: 2px solid #fff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
    cursor: pointer;
    transition: transform 0.2s ease-in-out;
}

.congestion-marker:hover {
    transform: scale(1.3);
}

/* 혼잡도 뱃지 (원활 > 보통 > 매우 혼잡) */
.cong-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 4.8px;
}

.cong--low {
    background: #2ecc71;
}

.cong--mid {
    background: #f1c40f;
}

.cong--high {
    background: #e74c3c;
}

/* 혼잡도별 색상 정의 */
.port-congestion-label {
    font-size: 10px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 4px;
    padding: 2px 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    /* 아래 두 줄은 마커와 겹치지 않도록 위치를 조정합니다. */
    transform: translate(0, -50%);
    position: relative;
    left: 10px;
}

/* 마커 래퍼는 map.js의 makeSvgMarker()가 .port-marker 로 생성됨 */
.port-marker {}

/* (기존 margin-left/-top로 억지 보정하던 것 전부 제거) */
.port-marker .cong-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: 999px;
    box-sizing: border-box;
    pointer-events: none;
    border: 3px solid;
    transition: width 0.2s ease, height 0.2s ease, box-shadow 0.2s ease;
    /* 부드러운 전환 효과 */
}

/* 수준별 색상, 크기, 그림자 효과 */
.port-marker .cong-ring.cong--high {
    width: 30px;
    height: 30px;
    border-color: rgba(239, 68, 68, 0.3);
    /* 빨간색, 투명도 50% */
    box-shadow: 0 0 12px 2px rgba(239, 68, 68, 0.7);
}

/* 매우 혼잡  */
.port-marker .cong-ring.cong--mid {
    width: 30px;
    height: 30px;
    border-color: rgba(245, 158, 11, 0.3);
    /* 주황색, 투명도 50% */
    box-shadow: 0 0 10px 2px rgba(245, 158, 11, 0.7);
}

/* 혼잡   */
.port-marker .cong-ring.cong--low {
    width: 30px;
    height: 30px;
    border-color: rgba(16, 185, 129, 0.3);
    /* 초록색, 투명도 50% */
    box-shadow: 0 0 8px 1px rgba(16, 185, 129, 0.7);
}

/* 날씨 이모지: 핀 왼쪽에 고정 */
.weather-emoji {
    position: absolute;
    left: 0%;
    /* 핀 요소의 왼쪽 끝 기준 */
    bottom: 0;
    /* 핀 끝 기준 */
    transform: translate(-80%, -50%);
    /* -X: 더 왼쪽으로 빼기(-80% ~ -100% 사이 조정 가능)
     -Y: 핀 중심 정도로 맞추기 */
    font-size: 22px;
    line-height: 1;
    user-select: none;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, .25));
    text-shadow: 0 0 3px black;
    /* 아이콘 가독성을 위한 그림자 */
}

/* map +/- btn 적용, 맨 아래 권장 */
/* 우상단: 줌 컨트롤과 라인 맞추기 */
/* map +/- btn 적용, 맨 아래 권장 */
.mapboxgl-ctrl-bottom-right {
    bottom: 70px;
    /* top: 230px; */
    right: 13px;
}

.mapboxgl-ctrl {
    z-index: 20;
}


/* map box 저작권 모양 */
.mapboxgl-ctrl-attrib button:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* ===== 로딩 스피너 ===== */
#loading-spinner {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 40px 20px;
    text-align: center;
    gap: 15px;
}

#loading-spinner .spinner {
    width: 48px;
    height: 48px;
    border: 5px solid #f3f3f3;
    /* Light grey */
    border-top: 5px solid #013895;
    /* Blue */
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

#loading-spinner p {
    font-size: 14px;
    font-weight: 500;
    color: #333;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* ===== 반응형: 좁은 화면에선 패널을 조금 더 넓게 ===== */
@media (max-width: 1024px) {
    .sidebar {
        --w: 360px;
    }
}

@media (max-width: 640px) {
    .sidebar {
        --w: min(86vw, 420px);
        top: 8px;
        left: 8px;
        bottom: 8px;
    }
}

/* 클릭 팝 애니메이션은 마커 전체가 아니라 svg에만 줘서 위치 흔들림 방지 */
.port-marker.bump svg {
    transform: scale(1.06);
    transform-origin: 50% 100%;
    /* 핀 끝을 기준 */
}

/* KRPUS 마커 애니메이션 */
@keyframes pulse-krpus {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.3);
    }

    100% {
        transform: scale(1);
    }
}

.port-marker .krpus-inner-marker.is-pulsing {
    animation: pulse-krpus 1.5s infinite ease-in-out;
}

/* Mapbox +/- 버튼 내부 아이콘 중앙 정렬 */
.mapboxgl-ctrl-zoom-in,
.mapboxgl-ctrl-zoom-out {
    display: flex !important;
    /* flexbox 레이아웃 강제 */
    justify-content: center !important;
    /* 가로 중앙 */
    align-items: center !important;
    /* 세로 중앙 */
}

/* ===== [추가] 1순위 도착 항구 라벨 ===== */
.destination-label-popup .mapboxgl-popup-content {
    background-color: #ffff !important;
    /* 반투명 회색 */
    color: #000000 !important;
    padding: 2px 5px !important;
    border-radius: 6px !important;
    font-size: 11px !important;
    font-weight: bold !important;
    box-shadow: none !important;
    margin-right: 10px;
    /* 기본 그림자 제거 */
}


/* Popup의 기본 흰색 꼬리(tip) 숨기기 */
.destination-label-popup .mapboxgl-popup-tip {
    display: none !important;

}

/* 현재 위치(마지막) 노드가 활성화되었을 때의 특별 스타일 */
.voy-item:last-child .voy-node.is-active {
    background: #FDDDE6;
    /* 분홍색 배경 */
}

/* 현재 위치(마지막) 노드 활성화 시 내부 마커 아이콘 색상 변경 */
.voy-item:last-child .voy-node.is-active img {
    filter: invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%);
    /* 빨간색으로 변경 */
}