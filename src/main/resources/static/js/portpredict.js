
$(function () {
    // 사이드바 토글
    $(document).on('click', '.sidebar__handle', function () {
        const $sidebar = $('.sidebar');
        const isCollapsed = $sidebar.toggleClass('is-collapsed').hasClass('is-collapsed');
        $(this).attr('aria-expanded', !isCollapsed);
    });
});


// resp를 추가하는 코드 작성할 것@@@@ -> 진짜 입력되는지 다 확인 할 것 + 항로 데이터는 시원이한테 다시 받기

// 조회 버튼: 클릭 이벤트

// 조회 버튼: 클릭 이벤트 (임시 테스트 모드 - API 대신 샘플 데이터 사용)
$(document).on('click', '.sidebar__btn.primary', function () {
    const selectValue = $('.cselect__value').attr('data-value'); // 드롭다운 선택 값
    const inputValue = $('.sidebar__input').val().trim(); // 입력 값

    if (!selectValue || !inputValue) {
        alert('옵션과 값을 모두 입력하세요.');
        return;
    }

    // API 호출 대신 사용할 샘플 JSON 데이터
    const resp = {
        "vsl_id": "f643855a-6409-3bea-aaf0-64b66def60ad",
        "latest": {
            "time_point": 11,
            "actual_time_point": 10.83,
            "time_stamp": "2025-08-13 14:06:32",
            "departure_time": "2025-08-13 03:16:44",
            "lat": 37.187775,
            "lon": 130.1177583,
            "cog": 13.1,
            "heading": 18.5,
            "predictions": [
                {
                    "rank": 1,
                    "port_id": "RUVVO",
                    "prob": 0.454553
                },
                {
                    "rank": 2,
                    "port_id": "RUNJK",
                    "prob": 0.326398
                },
                {
                    "rank": 3,
                    "port_id": "KRKPO",
                    "prob": 0.030311
                }
            ]
        },
        "timeline": [
            {
                "time_point": 5,
                "time_stamp": "2024-08-10 11:40:00",
                "actual_time_point": 5,
                "lat": 35.93396667,
                "lon": 129.7898167,
                "cog": 11.4,
                "heading": 9,
                "predictions": [
                    {
                        "rank": 1,
                        "port_id": "RUVVO",
                        "prob": 0.729818
                    },
                    {
                        "rank": 2,
                        "port_id": "RUNJK",
                        "prob": 0.16137
                    },
                    {
                        "rank": 3,
                        "port_id": "KRKPO",
                        "prob": 0.073335
                    }
                ]
            },
            {
                "time_point": 8,
                "time_stamp": "2024-08-10 14:40:00",
                "actual_time_point": 8,
                "lat": 36.59317222,
                "lon": 129.9615556,
                "cog": 11.46666667,
                "heading": 11.33333333,
                "predictions": [
                    {
                        "rank": 1,
                        "port_id": "RUVVO",
                        "prob": 0.822177
                    },
                    {
                        "rank": 2,
                        "port_id": "RUNJK",
                        "prob": 0.062672
                    },
                    {
                        "rank": 3,
                        "port_id": "KRKPO",
                        "prob": 0.018907
                    }
                ]
            },
            {
                "time_point": 11,
                "time_stamp": "2024-08-10 17:30:00",
                "actual_time_point": 10.83,
                "lat": 37.187775,
                "lon": 130.1177583,
                "cog": 13.1,
                "heading": 18.5,
                "predictions": [
                    {
                        "rank": 1,
                        "port_id": "RUVVO",
                        "prob": 0.454553
                    },
                    {
                        "rank": 2,
                        "port_id": "RUNJK",
                        "prob": 0.326398
                    },
                    {
                        "rank": 3,
                        "port_id": "KRKPO",
                        "prob": 0.030311
                    }
                ]
            }
        ],
        "tracks_topk": [
            {
                "rank": 1,
                "port_id": "RUVVO",
                "track": [
                    {
                        "time_stamp": "2024-08-10 06:40:00",
                        "lat": 35.07013333,
                        "lon": 129.11715
                    },
                    {
                        "time_stamp": "2024-08-10 06:50:00",
                        "lat": 35.0627,
                        "lon": 129.14575
                    },
                    {
                        "time_stamp": "2024-08-10 07:00:00",
                        "lat": 35.07003333,
                        "lon": 129.1816333
                    },
                    {
                        "time_stamp": "2024-08-10 07:10:00",
                        "lat": 35.0788,
                        "lon": 129.22165
                    },
                    {
                        "time_stamp": "2024-08-10 07:30:00",
                        "lat": 35.09448333,
                        "lon": 129.2998667
                    },
                    {
                        "time_stamp": "2024-08-10 07:40:00",
                        "lat": 35.10265,
                        "lon": 129.3509667
                    },
                    {
                        "time_stamp": "2024-08-10 07:50:00",
                        "lat": 35.10506667,
                        "lon": 129.3838833
                    },
                    {
                        "time_stamp": "2024-08-10 08:00:00",
                        "lat": 35.11913333,
                        "lon": 129.4404333
                    },
                    {
                        "time_stamp": "2024-08-10 08:20:00",
                        "lat": 35.1637,
                        "lon": 129.51565
                    },
                    {
                        "time_stamp": "2024-08-10 08:30:00",
                        "lat": 35.20048333,
                        "lon": 129.5428667
                    },
                    {
                        "time_stamp": "2024-08-10 08:40:00",
                        "lat": 35.23965,
                        "lon": 129.5666333
                    },
                    {
                        "time_stamp": "2024-08-10 08:50:00",
                        "lat": 35.27573333,
                        "lon": 129.58955
                    },
                    {
                        "time_stamp": "2024-08-10 09:10:00",
                        "lat": 35.35295,
                        "lon": 129.6325167
                    },
                    {
                        "time_stamp": "2024-08-10 09:20:00",
                        "lat": 35.3835,
                        "lon": 129.6468
                    },
                    {
                        "time_stamp": "2024-08-10 09:30:00",
                        "lat": 35.4316,
                        "lon": 129.6657333
                    },
                    {
                        "time_stamp": "2024-08-10 09:40:00",
                        "lat": 35.47626667,
                        "lon": 129.68075
                    },
                    {
                        "time_stamp": "2024-08-10 10:00:00",
                        "lat": 35.55393333,
                        "lon": 129.705325
                    },
                    {
                        "time_stamp": "2024-08-10 10:10:00",
                        "lat": 35.57798333,
                        "lon": 129.7123333
                    },
                    {
                        "time_stamp": "2024-08-10 10:20:00",
                        "lat": 35.61650833,
                        "lon": 129.7212
                    },
                    {
                        "time_stamp": "2024-08-10 10:30:00",
                        "lat": 35.65503333,
                        "lon": 129.7300667
                    },
                    {
                        "time_stamp": "2024-08-10 10:50:00",
                        "lat": 35.742875,
                        "lon": 129.7448333
                    },
                    {
                        "time_stamp": "2024-08-10 11:00:00",
                        "lat": 35.76651667,
                        "lon": 129.7490833
                    },
                    {
                        "time_stamp": "2024-08-10 11:10:00",
                        "lat": 35.81306667,
                        "lon": 129.7609083
                    },
                    {
                        "time_stamp": "2024-08-10 11:20:00",
                        "lat": 35.85961667,
                        "lon": 129.7727333
                    },
                    {
                        "time_stamp": "2024-08-10 11:40:00",
                        "lat": 35.93396667,
                        "lon": 129.7898167
                    },
                    {
                        "time_stamp": "2024-08-10 11:50:00",
                        "lat": 35.96240833,
                        "lon": 129.7970917
                    },
                    {
                        "time_stamp": "2024-08-10 12:00:00",
                        "lat": 35.99085,
                        "lon": 129.8043667
                    },
                    {
                        "time_stamp": "2024-08-10 12:10:00",
                        "lat": 36.02996667,
                        "lon": 129.8135833
                    },
                    {
                        "time_stamp": "2024-08-10 12:30:00",
                        "lat": 36.1082,
                        "lon": 129.8320167
                    },
                    {
                        "time_stamp": "2024-08-10 12:40:00",
                        "lat": 36.1737,
                        "lon": 129.8464833
                    },
                    {
                        "time_stamp": "2024-08-10 12:50:00",
                        "lat": 36.19886111,
                        "lon": 129.8549222
                    },
                    {
                        "time_stamp": "2024-08-10 13:00:00",
                        "lat": 36.22402222,
                        "lon": 129.8633611
                    },
                    {
                        "time_stamp": "2024-08-10 13:20:00",
                        "lat": 36.29344167,
                        "lon": 129.8838917
                    },
                    {
                        "time_stamp": "2024-08-10 13:30:00",
                        "lat": 36.3377,
                        "lon": 129.8959833
                    },
                    {
                        "time_stamp": "2024-08-10 13:40:00",
                        "lat": 36.36566667,
                        "lon": 129.9036167
                    },
                    {
                        "time_stamp": "2024-08-10 13:50:00",
                        "lat": 36.40804167,
                        "lon": 129.9146333
                    },
                    {
                        "time_stamp": "2024-08-10 14:10:00",
                        "lat": 36.49051667,
                        "lon": 129.9356833
                    },
                    {
                        "time_stamp": "2024-08-10 14:20:00",
                        "lat": 36.5274,
                        "lon": 129.945
                    },
                    {
                        "time_stamp": "2024-08-10 14:30:00",
                        "lat": 36.56428333,
                        "lon": 129.9543167
                    },
                    {
                        "time_stamp": "2024-08-10 14:40:00",
                        "lat": 36.59317222,
                        "lon": 129.9615556
                    },
                    {
                        "time_stamp": "2024-08-10 15:00:00",
                        "lat": 36.65095,
                        "lon": 129.9760333
                    },
                    {
                        "time_stamp": "2024-08-10 15:10:00",
                        "lat": 36.69165,
                        "lon": 129.9864833
                    },
                    {
                        "time_stamp": "2024-08-10 15:20:00",
                        "lat": 36.73218889,
                        "lon": 129.9973778
                    },
                    {
                        "time_stamp": "2024-08-10 15:30:00",
                        "lat": 36.77272778,
                        "lon": 130.0082722
                    },
                    {
                        "time_stamp": "2024-08-10 15:50:00",
                        "lat": 36.840525,
                        "lon": 130.0267583
                    },
                    {
                        "time_stamp": "2024-08-10 16:00:00",
                        "lat": 36.86778333,
                        "lon": 130.03435
                    },
                    {
                        "time_stamp": "2024-08-10 16:10:00",
                        "lat": 36.92433333,
                        "lon": 130.0496833
                    },
                    {
                        "time_stamp": "2024-08-10 16:20:00",
                        "lat": 36.952175,
                        "lon": 130.05685
                    },
                    {
                        "time_stamp": "2024-08-10 16:40:00",
                        "lat": 37.02085556,
                        "lon": 130.0745833
                    },
                    {
                        "time_stamp": "2024-08-10 16:50:00",
                        "lat": 37.06169444,
                        "lon": 130.08515
                    },
                    {
                        "time_stamp": "2024-08-10 17:00:00",
                        "lat": 37.10253333,
                        "lon": 130.0957167
                    },
                    {
                        "time_stamp": "2024-08-10 17:10:00",
                        "lat": 37.1315,
                        "lon": 130.1028
                    },
                    {
                        "time_stamp": "2024-08-10 17:30:00",
                        "lat": 37.187775,
                        "lon": 130.1177583
                    },
                    {
                        "time_stamp": "2024-08-10 17:40:00",
                        "lat": 37.21508333,
                        "lon": 130.1256333
                    },
                    {
                        "time_stamp": "2024-08-10 17:50:00",
                        "lat": 37.27213333,
                        "lon": 130.1458833
                    },
                    {
                        "time_stamp": "2024-08-10 18:00:00",
                        "lat": 37.30759166,
                        "lon": 130.1587833
                    },
                    {
                        "time_stamp": "2024-08-10 18:20:00",
                        "lat": 37.3752,
                        "lon": 130.1820333
                    },
                    {
                        "time_stamp": "2024-08-10 18:30:00",
                        "lat": 37.40537778,
                        "lon": 130.1906056
                    },
                    {
                        "time_stamp": "2024-08-10 18:40:00",
                        "lat": 37.43555555,
                        "lon": 130.1991778
                    },
                    {
                        "time_stamp": "2024-08-10 18:50:00",
                        "lat": 37.46573333,
                        "lon": 130.20775
                    },
                    {
                        "time_stamp": "2024-08-10 19:10:00",
                        "lat": 37.54929166,
                        "lon": 130.2244667
                    },
                    {
                        "time_stamp": "2024-08-10 19:20:00",
                        "lat": 37.57783333,
                        "lon": 130.23075
                    },
                    {
                        "time_stamp": "2024-08-10 19:30:00",
                        "lat": 37.61466111,
                        "lon": 130.2422167
                    },
                    {
                        "time_stamp": "2024-08-10 19:40:00",
                        "lat": 37.65148889,
                        "lon": 130.2536833
                    },
                    {
                        "time_stamp": "2024-08-10 20:00:00",
                        "lat": 37.7437,
                        "lon": 130.2819833
                    },
                    {
                        "time_stamp": "2024-08-10 20:10:00",
                        "lat": 37.77239167,
                        "lon": 130.2911917
                    },
                    {
                        "time_stamp": "2024-08-10 20:20:00",
                        "lat": 37.80108333,
                        "lon": 130.3004
                    },
                    {
                        "time_stamp": "2024-08-10 20:30:00",
                        "lat": 37.85641667,
                        "lon": 130.31835
                    },
                    {
                        "time_stamp": "2024-08-10 20:50:00",
                        "lat": 37.93317222,
                        "lon": 130.3409389
                    },
                    {
                        "time_stamp": "2024-08-10 21:00:00",
                        "lat": 37.97155,
                        "lon": 130.3522333
                    },
                    {
                        "time_stamp": "2024-08-10 21:10:00",
                        "lat": 38.00053334,
                        "lon": 130.3603667
                    },
                    {
                        "time_stamp": "2024-08-10 21:20:00",
                        "lat": 38.02951667,
                        "lon": 130.3685
                    },
                    {
                        "time_stamp": "2024-08-10 21:40:00",
                        "lat": 38.10978333,
                        "lon": 130.3912
                    },
                    {
                        "time_stamp": "2024-08-10 21:50:00",
                        "lat": 38.15205833,
                        "lon": 130.4025167
                    },
                    {
                        "time_stamp": "2024-08-10 22:00:00",
                        "lat": 38.19433333,
                        "lon": 130.4138333
                    },
                    {
                        "time_stamp": "2024-08-10 22:10:00",
                        "lat": 38.23091667,
                        "lon": 130.4235083
                    },
                    {
                        "time_stamp": "2024-08-10 22:30:00",
                        "lat": 38.30796667,
                        "lon": 130.4451667
                    },
                    {
                        "time_stamp": "2024-08-10 22:40:00",
                        "lat": 38.34843333,
                        "lon": 130.45715
                    },
                    {
                        "time_stamp": "2024-08-10 22:50:00",
                        "lat": 38.376875,
                        "lon": 130.4660333
                    },
                    {
                        "time_stamp": "2024-08-10 23:00:00",
                        "lat": 38.40531667,
                        "lon": 130.4749167
                    },
                    {
                        "time_stamp": "2024-08-10 23:20:00",
                        "lat": 38.47853333,
                        "lon": 130.4981167
                    },
                    {
                        "time_stamp": "2024-08-10 23:30:00",
                        "lat": 38.52326667,
                        "lon": 130.51205
                    },
                    {
                        "time_stamp": "2024-08-10 23:40:00",
                        "lat": 38.56198334,
                        "lon": 130.5238833
                    },
                    {
                        "time_stamp": "2024-08-10 23:50:00",
                        "lat": 38.6007,
                        "lon": 130.5357167
                    },
                    {
                        "time_stamp": "2024-08-11 00:10:00",
                        "lat": 38.673325,
                        "lon": 130.5577333
                    },
                    {
                        "time_stamp": "2024-08-11 00:20:00",
                        "lat": 38.7096375,
                        "lon": 130.5687417
                    },
                    {
                        "time_stamp": "2024-08-11 00:30:00",
                        "lat": 38.74595,
                        "lon": 130.57975
                    },
                    {
                        "time_stamp": "2024-08-11 00:40:00",
                        "lat": 38.8046,
                        "lon": 130.5987333
                    },
                    {
                        "time_stamp": "2024-08-11 01:00:00",
                        "lat": 38.86241667,
                        "lon": 130.6181167
                    },
                    {
                        "time_stamp": "2024-08-11 01:10:00",
                        "lat": 38.902175,
                        "lon": 130.6308667
                    },
                    {
                        "time_stamp": "2024-08-11 01:20:00",
                        "lat": 38.94193334,
                        "lon": 130.6436167
                    },
                    {
                        "time_stamp": "2024-08-11 01:30:00",
                        "lat": 38.98169167,
                        "lon": 130.6563667
                    },
                    {
                        "time_stamp": "2024-08-11 01:50:00",
                        "lat": 39.06120834,
                        "lon": 130.6818667
                    },
                    {
                        "time_stamp": "2024-08-11 02:00:00",
                        "lat": 39.10096667,
                        "lon": 130.6946167
                    },
                    {
                        "time_stamp": "2024-08-11 02:10:00",
                        "lat": 39.13976667,
                        "lon": 130.706475
                    },
                    {
                        "time_stamp": "2024-08-11 02:20:00",
                        "lat": 39.17856667,
                        "lon": 130.7183333
                    },
                    {
                        "time_stamp": "2024-08-11 02:40:00",
                        "lat": 39.23121111,
                        "lon": 130.7345
                    },
                    {
                        "time_stamp": "2024-08-11 02:50:00",
                        "lat": 39.25753333,
                        "lon": 130.7425833
                    },
                    {
                        "time_stamp": "2024-08-11 03:00:00",
                        "lat": 39.29185238,
                        "lon": 130.7521464
                    },
                    {
                        "time_stamp": "2024-08-11 03:10:00",
                        "lat": 39.32617143,
                        "lon": 130.7617095
                    },
                    {
                        "time_stamp": "2024-08-11 03:30:00",
                        "lat": 39.39480952,
                        "lon": 130.7808357
                    },
                    {
                        "time_stamp": "2024-08-11 03:40:00",
                        "lat": 39.42912857,
                        "lon": 130.7903988
                    },
                    {
                        "time_stamp": "2024-08-11 03:50:00",
                        "lat": 39.46344762,
                        "lon": 130.7999619
                    },
                    {
                        "time_stamp": "2024-08-11 04:00:00",
                        "lat": 39.49776667,
                        "lon": 130.809525
                    },
                    {
                        "time_stamp": "2024-08-11 04:20:00",
                        "lat": 39.56640476,
                        "lon": 130.8286512
                    },
                    {
                        "time_stamp": "2024-08-11 04:30:00",
                        "lat": 39.60072381,
                        "lon": 130.8382143
                    },
                    {
                        "time_stamp": "2024-08-11 04:40:00",
                        "lat": 39.63504286,
                        "lon": 130.8477774
                    },
                    {
                        "time_stamp": "2024-08-11 04:50:00",
                        "lat": 39.6693619,
                        "lon": 130.8573405
                    },
                    {
                        "time_stamp": "2024-08-11 05:10:00",
                        "lat": 39.738,
                        "lon": 130.8764667
                    },
                    {
                        "time_stamp": "2024-08-11 05:20:00",
                        "lat": 39.77445909,
                        "lon": 130.8869303
                    },
                    {
                        "time_stamp": "2024-08-11 05:30:00",
                        "lat": 39.81091818,
                        "lon": 130.8973939
                    },
                    {
                        "time_stamp": "2024-08-11 05:40:00",
                        "lat": 39.84737727,
                        "lon": 130.9078576
                    },
                    {
                        "time_stamp": "2024-08-11 06:00:00",
                        "lat": 39.92029545,
                        "lon": 130.9287849
                    },
                    {
                        "time_stamp": "2024-08-11 06:10:00",
                        "lat": 39.95675455,
                        "lon": 130.9392485
                    },
                    {
                        "time_stamp": "2024-08-11 06:20:00",
                        "lat": 39.99321364,
                        "lon": 130.9497121
                    },
                    {
                        "time_stamp": "2024-08-11 06:30:00",
                        "lat": 40.02967273,
                        "lon": 130.9601758
                    },
                    {
                        "time_stamp": "2024-08-11 06:50:00",
                        "lat": 40.10259091,
                        "lon": 130.981103
                    },
                    {
                        "time_stamp": "2024-08-11 07:00:00",
                        "lat": 40.13905,
                        "lon": 130.9915667
                    },
                    {
                        "time_stamp": "2024-08-11 07:10:00",
                        "lat": 40.17224444,
                        "lon": 131.0011389
                    },
                    {
                        "time_stamp": "2024-08-11 07:20:00",
                        "lat": 40.20543889,
                        "lon": 131.0107111
                    },
                    {
                        "time_stamp": "2024-08-11 07:40:00",
                        "lat": 40.27084444,
                        "lon": 131.0298833
                    },
                    {
                        "time_stamp": "2024-08-11 07:50:00",
                        "lat": 40.30305556,
                        "lon": 131.0394833
                    },
                    {
                        "time_stamp": "2024-08-11 08:00:00",
                        "lat": 40.33526667,
                        "lon": 131.0490833
                    },
                    {
                        "time_stamp": "2024-08-11 08:10:00",
                        "lat": 40.3734,
                        "lon": 131.0614809
                    },
                    {
                        "time_stamp": "2024-08-11 08:30:00",
                        "lat": 40.44966667,
                        "lon": 131.0862762
                    },
                    {
                        "time_stamp": "2024-08-11 08:40:00",
                        "lat": 40.4878,
                        "lon": 131.0986738
                    },
                    {
                        "time_stamp": "2024-08-11 08:50:00",
                        "lat": 40.52593334,
                        "lon": 131.1110714
                    },
                    {
                        "time_stamp": "2024-08-11 09:00:00",
                        "lat": 40.56406667,
                        "lon": 131.123469
                    },
                    {
                        "time_stamp": "2024-08-11 09:20:00",
                        "lat": 40.64033334,
                        "lon": 131.1482643
                    },
                    {
                        "time_stamp": "2024-08-11 09:30:00",
                        "lat": 40.67846667,
                        "lon": 131.1606619
                    },
                    {
                        "time_stamp": "2024-08-11 09:40:00",
                        "lat": 40.7166,
                        "lon": 131.1730595
                    },
                    {
                        "time_stamp": "2024-08-11 09:50:00",
                        "lat": 40.75473334,
                        "lon": 131.1854571
                    },
                    {
                        "time_stamp": "2024-08-11 10:10:00",
                        "lat": 40.831,
                        "lon": 131.2102524
                    },
                    {
                        "time_stamp": "2024-08-11 10:20:00",
                        "lat": 40.86913334,
                        "lon": 131.22265
                    },
                    {
                        "time_stamp": "2024-08-11 10:30:00",
                        "lat": 40.90726667,
                        "lon": 131.2350476
                    },
                    {
                        "time_stamp": "2024-08-11 10:40:00",
                        "lat": 40.9454,
                        "lon": 131.2474452
                    },
                    {
                        "time_stamp": "2024-08-11 11:00:00",
                        "lat": 41.02166667,
                        "lon": 131.2722405
                    },
                    {
                        "time_stamp": "2024-08-11 11:10:00",
                        "lat": 41.0598,
                        "lon": 131.2846381
                    },
                    {
                        "time_stamp": "2024-08-11 11:20:00",
                        "lat": 41.09793334,
                        "lon": 131.2970357
                    },
                    {
                        "time_stamp": "2024-08-11 11:30:00",
                        "lat": 41.13606667,
                        "lon": 131.3094333
                    },
                    {
                        "time_stamp": "2024-08-11 11:50:00",
                        "lat": 41.19973334,
                        "lon": 131.3333
                    },
                    {
                        "time_stamp": "2024-08-11 12:00:00",
                        "lat": 41.23156667,
                        "lon": 131.3452333
                    },
                    {
                        "time_stamp": "2024-08-11 12:10:00",
                        "lat": 41.26688195,
                        "lon": 131.3569
                    },
                    {
                        "time_stamp": "2024-08-11 12:20:00",
                        "lat": 41.30219723,
                        "lon": 131.3685667
                    },
                    {
                        "time_stamp": "2024-08-11 12:40:00",
                        "lat": 41.37282778,
                        "lon": 131.3919
                    },
                    {
                        "time_stamp": "2024-08-11 12:50:00",
                        "lat": 41.40814306,
                        "lon": 131.4035667
                    },
                    {
                        "time_stamp": "2024-08-11 13:00:00",
                        "lat": 41.44345834,
                        "lon": 131.4152333
                    },
                    {
                        "time_stamp": "2024-08-11 13:10:00",
                        "lat": 41.47877361,
                        "lon": 131.4269
                    },
                    {
                        "time_stamp": "2024-08-11 13:30:00",
                        "lat": 41.54940417,
                        "lon": 131.4502333
                    },
                    {
                        "time_stamp": "2024-08-11 13:40:00",
                        "lat": 41.58471944,
                        "lon": 131.4619
                    },
                    {
                        "time_stamp": "2024-08-11 13:50:00",
                        "lat": 41.62003472,
                        "lon": 131.4735667
                    },
                    {
                        "time_stamp": "2024-08-11 14:00:00",
                        "lat": 41.65535,
                        "lon": 131.4852333
                    },
                    {
                        "time_stamp": "2024-08-11 14:20:00",
                        "lat": 41.71778334,
                        "lon": 131.5047667
                    },
                    {
                        "time_stamp": "2024-08-11 14:30:00",
                        "lat": 41.749,
                        "lon": 131.5145333
                    },
                    {
                        "time_stamp": "2024-08-11 14:40:00",
                        "lat": 41.78021667,
                        "lon": 131.5243
                    },
                    {
                        "time_stamp": "2024-08-11 14:50:00",
                        "lat": 41.81821667,
                        "lon": 131.5364833
                    },
                    {
                        "time_stamp": "2024-08-11 15:10:00",
                        "lat": 41.88303333,
                        "lon": 131.55915
                    },
                    {
                        "time_stamp": "2024-08-11 15:20:00",
                        "lat": 41.91143333,
                        "lon": 131.5681333
                    },
                    {
                        "time_stamp": "2024-08-11 15:30:00",
                        "lat": 41.95143333,
                        "lon": 131.5780833
                    },
                    {
                        "time_stamp": "2024-08-11 15:40:00",
                        "lat": 41.99143333,
                        "lon": 131.5880333
                    },
                    {
                        "time_stamp": "2024-08-11 16:00:00",
                        "lat": 42.05925,
                        "lon": 131.6032833
                    },
                    {
                        "time_stamp": "2024-08-11 16:10:00",
                        "lat": 42.092975,
                        "lon": 131.6110583
                    },
                    {
                        "time_stamp": "2024-08-11 16:20:00",
                        "lat": 42.1267,
                        "lon": 131.6188333
                    },
                    {
                        "time_stamp": "2024-08-11 16:30:00",
                        "lat": 42.15628333,
                        "lon": 131.6252167
                    },
                    {
                        "time_stamp": "2024-08-11 16:50:00",
                        "lat": 42.21746667,
                        "lon": 131.6385833
                    },
                    {
                        "time_stamp": "2024-08-11 17:00:00",
                        "lat": 42.258275,
                        "lon": 131.648575
                    },
                    {
                        "time_stamp": "2024-08-11 17:10:00",
                        "lat": 42.29908333,
                        "lon": 131.6585667
                    },
                    {
                        "time_stamp": "2024-08-11 17:20:00",
                        "lat": 42.31698333,
                        "lon": 131.6635667
                    },
                    {
                        "time_stamp": "2024-08-11 17:40:00",
                        "lat": 42.40861667,
                        "lon": 131.6675167
                    },
                    {
                        "time_stamp": "2024-08-11 17:50:00",
                        "lat": 42.44256667,
                        "lon": 131.6644667
                    },
                    {
                        "time_stamp": "2024-08-11 18:00:00",
                        "lat": 42.47651667,
                        "lon": 131.6614167
                    },
                    {
                        "time_stamp": "2024-08-11 18:10:00",
                        "lat": 42.53188333,
                        "lon": 131.65835
                    },
                    {
                        "time_stamp": "2024-08-11 18:30:00",
                        "lat": 42.58749167,
                        "lon": 131.6594417
                    },
                    {
                        "time_stamp": "2024-08-11 18:40:00",
                        "lat": 42.61529583,
                        "lon": 131.6599875
                    },
                    {
                        "time_stamp": "2024-08-11 18:50:00",
                        "lat": 42.6431,
                        "lon": 131.6605333
                    },
                    {
                        "time_stamp": "2024-08-11 19:00:00",
                        "lat": 42.68366667,
                        "lon": 131.6881667
                    },
                    {
                        "time_stamp": "2024-08-11 19:20:00",
                        "lat": 42.72246667,
                        "lon": 131.7565667
                    },
                    {
                        "time_stamp": "2024-08-11 19:30:00",
                        "lat": 42.74288333,
                        "lon": 131.7950667
                    },
                    {
                        "time_stamp": "2024-08-11 19:40:00",
                        "lat": 42.76185,
                        "lon": 131.8327333
                    },
                    {
                        "time_stamp": "2024-08-11 19:50:00",
                        "lat": 42.76951667,
                        "lon": 131.84795
                    },
                    {
                        "time_stamp": "2024-08-11 20:10:00",
                        "lat": 42.80746667,
                        "lon": 131.9261333
                    },
                    {
                        "time_stamp": "2024-08-11 20:20:00",
                        "lat": 42.82523333,
                        "lon": 131.9654333
                    },
                    {
                        "time_stamp": "2024-08-11 20:30:00",
                        "lat": 42.83973333,
                        "lon": 132.0083333
                    },
                    {
                        "time_stamp": "2024-08-11 20:40:00",
                        "lat": 42.86306667,
                        "lon": 132.0669
                    },
                    {
                        "time_stamp": "2024-08-11 21:00:00",
                        "lat": 42.90893333,
                        "lon": 132.1395333
                    },
                    {
                        "time_stamp": "2024-08-11 21:10:00",
                        "lat": 42.95308333,
                        "lon": 132.1164833
                    },
                    {
                        "time_stamp": "2024-08-11 21:20:00",
                        "lat": 42.9805,
                        "lon": 132.09385
                    },
                    {
                        "time_stamp": "2024-08-11 21:30:00",
                        "lat": 42.99313333,
                        "lon": 132.0697333
                    },
                    {
                        "time_stamp": "2024-08-11 21:50:00",
                        "lat": 43.0184,
                        "lon": 132.0215
                    },
                    {
                        "time_stamp": "2024-08-11 22:00:00",
                        "lat": 43.03103334,
                        "lon": 131.9973833
                    },
                    {
                        "time_stamp": "2024-08-11 22:10:00",
                        "lat": 43.04366667,
                        "lon": 131.9732667
                    },
                    {
                        "time_stamp": "2024-08-11 22:20:00",
                        "lat": 43.04545,
                        "lon": 131.9733667
                    },
                    {
                        "time_stamp": "2024-08-11 22:40:00",
                        "lat": 43.04738333,
                        "lon": 131.9741167
                    },
                    {
                        "time_stamp": "2024-08-11 22:50:00",
                        "lat": 43.04341667,
                        "lon": 131.9709833
                    },
                    {
                        "time_stamp": "2024-08-11 23:00:00",
                        "lat": 43.04895556,
                        "lon": 131.9538472
                    },
                    {
                        "time_stamp": "2024-08-11 23:10:00",
                        "lat": 43.05449445,
                        "lon": 131.9367111
                    },
                    {
                        "time_stamp": "2024-08-11 23:30:00",
                        "lat": 43.06557222,
                        "lon": 131.9024389
                    },
                    {
                        "time_stamp": "2024-08-11 23:40:00",
                        "lat": 43.07111111,
                        "lon": 131.8853028
                    },
                    {
                        "time_stamp": "2024-08-11 23:50:00",
                        "lat": 43.07665,
                        "lon": 131.8681667
                    },
                    {
                        "time_stamp": "2024-08-12 00:10:00",
                        "lat": 43.08985,
                        "lon": 131.8681833
                    }
                ]
            },
            {
                "rank": 2,
                "port_id": "RUNJK",
                "track": [
                    {
                        "lat": 35.05663589,
                        "lon": 129.1333268
                    },
                    {
                        "lat": 35.15563509,
                        "lon": 129.4162323
                    },
                    {
                        "lat": 35.32669094,
                        "lon": 129.6165944
                    },
                    {
                        "lat": 35.54214951,
                        "lon": 129.6963385
                    },
                    {
                        "lat": 35.77247421,
                        "lon": 129.7629179
                    },
                    {
                        "lat": 35.98799233,
                        "lon": 129.8101927
                    },
                    {
                        "lat": 36.20836561,
                        "lon": 129.8794801
                    },
                    {
                        "lat": 36.39821327,
                        "lon": 129.9426814
                    },
                    {
                        "lat": 36.60374228,
                        "lon": 130.0170469
                    },
                    {
                        "lat": 36.80532269,
                        "lon": 130.0896678
                    },
                    {
                        "lat": 37.00898381,
                        "lon": 130.162495
                    },
                    {
                        "lat": 37.21441573,
                        "lon": 130.2363165
                    },
                    {
                        "lat": 37.4176053,
                        "lon": 130.3092171
                    },
                    {
                        "lat": 37.62200721,
                        "lon": 130.3834069
                    },
                    {
                        "lat": 37.8269124,
                        "lon": 130.4606492
                    },
                    {
                        "lat": 38.02858581,
                        "lon": 130.533739
                    },
                    {
                        "lat": 38.22864711,
                        "lon": 130.6251261
                    },
                    {
                        "lat": 38.42536946,
                        "lon": 130.7520739
                    },
                    {
                        "lat": 38.61102739,
                        "lon": 130.8583588
                    },
                    {
                        "lat": 38.79771939,
                        "lon": 130.964274
                    },
                    {
                        "lat": 38.98439457,
                        "lon": 131.071822
                    },
                    {
                        "lat": 39.16838597,
                        "lon": 131.1783687
                    },
                    {
                        "lat": 39.35465099,
                        "lon": 131.2869662
                    },
                    {
                        "lat": 39.53964899,
                        "lon": 131.3931492
                    },
                    {
                        "lat": 39.73351367,
                        "lon": 131.5125447
                    },
                    {
                        "lat": 39.90806285,
                        "lon": 131.6372508
                    },
                    {
                        "lat": 40.09005663,
                        "lon": 131.7607747
                    },
                    {
                        "lat": 40.29207763,
                        "lon": 131.8860007
                    },
                    {
                        "lat": 40.47976881,
                        "lon": 132.0000822
                    },
                    {
                        "lat": 40.67906609,
                        "lon": 132.1244607
                    },
                    {
                        "lat": 40.86716496,
                        "lon": 132.2451252
                    },
                    {
                        "lat": 41.07078895,
                        "lon": 132.3725893
                    },
                    {
                        "lat": 41.24999131,
                        "lon": 132.4839192
                    },
                    {
                        "lat": 41.43218918,
                        "lon": 132.550608
                    },
                    {
                        "lat": 41.62245678,
                        "lon": 132.600405
                    },
                    {
                        "lat": 41.81353525,
                        "lon": 132.650739
                    },
                    {
                        "lat": 41.99869819,
                        "lon": 132.6988502
                    },
                    {
                        "lat": 42.18741601,
                        "lon": 132.7495302
                    },
                    {
                        "lat": 42.3400791,
                        "lon": 132.7692693
                    },
                    {
                        "lat": 42.35822245,
                        "lon": 132.7775936
                    },
                    {
                        "lat": 42.37652592,
                        "lon": 132.7880415
                    },
                    {
                        "lat": 42.3954177,
                        "lon": 132.798398
                    },
                    {
                        "lat": 42.41158932,
                        "lon": 132.8071914
                    },
                    {
                        "lat": 42.43018057,
                        "lon": 132.8162249
                    },
                    {
                        "lat": 42.44547553,
                        "lon": 132.825353
                    },
                    {
                        "lat": 42.46315884,
                        "lon": 132.8345453
                    },
                    {
                        "lat": 42.48072649,
                        "lon": 132.8440083
                    },
                    {
                        "lat": 42.50116265,
                        "lon": 132.8541909
                    },
                    {
                        "lat": 42.51875489,
                        "lon": 132.8630116
                    },
                    {
                        "lat": 42.53816135,
                        "lon": 132.8742231
                    },
                    {
                        "lat": 42.55759168,
                        "lon": 132.8850759
                    },
                    {
                        "lat": 42.572228,
                        "lon": 132.8928811
                    },
                    {
                        "lat": 42.59209505,
                        "lon": 132.9040852
                    },
                    {
                        "lat": 42.60921919,
                        "lon": 132.9134081
                    },
                    {
                        "lat": 42.62870268,
                        "lon": 132.9245913
                    },
                    {
                        "lat": 42.64721254,
                        "lon": 132.9363477
                    },
                    {
                        "lat": 42.66406893,
                        "lon": 132.9466401
                    },
                    {
                        "lat": 42.68267434,
                        "lon": 132.9569659
                    },
                    {
                        "lat": 42.70164168,
                        "lon": 132.9672173
                    },
                    {
                        "lat": 42.72087035,
                        "lon": 132.9708866
                    },
                    {
                        "lat": 42.74075951,
                        "lon": 132.9673469
                    },
                    {
                        "lat": 42.76129855,
                        "lon": 132.9640183
                    },
                    {
                        "lat": 42.78013741,
                        "lon": 132.9651585
                    },
                    {
                        "lat": 42.79764324,
                        "lon": 132.9614819
                    },
                    {
                        "lat": 42.80794796,
                        "lon": 132.9619509
                    },
                    {
                        "lat": 42.8081136,
                        "lon": 132.9617483
                    },
                    {
                        "lat": 42.80825012,
                        "lon": 132.9614641
                    },
                    {
                        "lat": 42.8083035,
                        "lon": 132.9615257
                    },
                    {
                        "lat": 42.80831233,
                        "lon": 132.9620095
                    },
                    {
                        "lat": 42.80862563,
                        "lon": 132.9630221
                    },
                    {
                        "lat": 42.80928047,
                        "lon": 132.9632721
                    },
                    {
                        "lat": 42.80945634,
                        "lon": 132.9630577
                    },
                    {
                        "lat": 42.80971784,
                        "lon": 132.9629289
                    },
                    {
                        "lat": 42.80902035,
                        "lon": 132.9630985
                    },
                    {
                        "lat": 42.8087196,
                        "lon": 132.9634065
                    },
                    {
                        "lat": 42.80808444,
                        "lon": 132.9623055
                    },
                    {
                        "lat": 42.80808792,
                        "lon": 132.9617043
                    },
                    {
                        "lat": 42.80794681,
                        "lon": 132.9615442
                    },
                    {
                        "lat": 42.80794559,
                        "lon": 132.9613446
                    },
                    {
                        "lat": 42.80791764,
                        "lon": 132.961359
                    },
                    {
                        "lat": 42.80789144,
                        "lon": 132.9610308
                    },
                    {
                        "lat": 42.80793269,
                        "lon": 132.9611467
                    },
                    {
                        "lat": 42.80809425,
                        "lon": 132.9609096
                    },
                    {
                        "lat": 42.80804953,
                        "lon": 132.9608691
                    },
                    {
                        "lat": 42.80804672,
                        "lon": 132.9609814
                    },
                    {
                        "lat": 42.80824119,
                        "lon": 132.9608966
                    },
                    {
                        "lat": 42.80794894,
                        "lon": 132.9616637
                    },
                    {
                        "lat": 42.80819737,
                        "lon": 132.9622778
                    },
                    {
                        "lat": 42.80804957,
                        "lon": 132.9616844
                    },
                    {
                        "lat": 42.80806203,
                        "lon": 132.9620945
                    },
                    {
                        "lat": 42.80827709,
                        "lon": 132.9626974
                    },
                    {
                        "lat": 42.80788628,
                        "lon": 132.9611981
                    },
                    {
                        "lat": 42.80802439,
                        "lon": 132.9610159
                    },
                    {
                        "lat": 42.80799728,
                        "lon": 132.9611007
                    },
                    {
                        "lat": 42.80792049,
                        "lon": 132.9613579
                    },
                    {
                        "lat": 42.80781598,
                        "lon": 132.9610346
                    },
                    {
                        "lat": 42.80775695,
                        "lon": 132.9615715
                    },
                    {
                        "lat": 42.80773706,
                        "lon": 132.9612813
                    },
                    {
                        "lat": 42.80783587,
                        "lon": 132.9613597
                    },
                    {
                        "lat": 42.79961943,
                        "lon": 132.8879089
                    }
                ]
            },
            {
                "rank": 3,
                "port_id": "KRKPO",
                "track": [
                    {
                        "lat": 35.06733333,
                        "lon": 129.1376167
                    },
                    {
                        "lat": 35.07525042,
                        "lon": 129.1484538
                    },
                    {
                        "lat": 35.08376702,
                        "lon": 129.1587409
                    },
                    {
                        "lat": 35.09273722,
                        "lon": 129.1686126
                    },
                    {
                        "lat": 35.10201513,
                        "lon": 129.1782034
                    },
                    {
                        "lat": 35.11145484,
                        "lon": 129.1876478
                    },
                    {
                        "lat": 35.12091045,
                        "lon": 129.1970803
                    },
                    {
                        "lat": 35.13023617,
                        "lon": 129.2066355
                    },
                    {
                        "lat": 35.13934773,
                        "lon": 129.2163911
                    },
                    {
                        "lat": 35.14832668,
                        "lon": 129.2262731
                    },
                    {
                        "lat": 35.1572822,
                        "lon": 129.236182
                    },
                    {
                        "lat": 35.16632016,
                        "lon": 129.2460204
                    },
                    {
                        "lat": 35.17551198,
                        "lon": 129.2557138
                    },
                    {
                        "lat": 35.18490881,
                        "lon": 129.2652011
                    },
                    {
                        "lat": 35.19456095,
                        "lon": 129.2744221
                    },
                    {
                        "lat": 35.20446194,
                        "lon": 129.2833787
                    },
                    {
                        "lat": 35.21449965,
                        "lon": 129.2921884
                    },
                    {
                        "lat": 35.22455042,
                        "lon": 129.3009814
                    },
                    {
                        "lat": 35.23449947,
                        "lon": 129.3098795
                    },
                    {
                        "lat": 35.24429091,
                        "lon": 129.3189494
                    },
                    {
                        "lat": 35.25389294,
                        "lon": 129.328235
                    },
                    {
                        "lat": 35.26327757,
                        "lon": 129.3377756
                    },
                    {
                        "lat": 35.27255618,
                        "lon": 129.3474392
                    },
                    {
                        "lat": 35.28201755,
                        "lon": 129.3568754
                    },
                    {
                        "lat": 35.29196199,
                        "lon": 129.3657194
                    },
                    {
                        "lat": 35.30258316,
                        "lon": 129.3737395
                    },
                    {
                        "lat": 35.31361433,
                        "lon": 129.3812768
                    },
                    {
                        "lat": 35.32466448,
                        "lon": 129.3888272
                    },
                    {
                        "lat": 35.33535282,
                        "lon": 129.3968712
                    },
                    {
                        "lat": 35.34549498,
                        "lon": 129.4055961
                    },
                    {
                        "lat": 35.35508339,
                        "lon": 129.4149246
                    },
                    {
                        "lat": 35.36411696,
                        "lon": 129.4247703
                    },
                    {
                        "lat": 35.37269714,
                        "lon": 129.4349866
                    },
                    {
                        "lat": 35.38120871,
                        "lon": 129.4452615
                    },
                    {
                        "lat": 35.39008495,
                        "lon": 129.4552547
                    },
                    {
                        "lat": 35.39973111,
                        "lon": 129.4646274
                    },
                    {
                        "lat": 35.41025531,
                        "lon": 129.4730579
                    },
                    {
                        "lat": 35.42158676,
                        "lon": 129.4802343
                    },
                    {
                        "lat": 35.43365139,
                        "lon": 129.4858495
                    },
                    {
                        "lat": 35.44631189,
                        "lon": 129.4899378
                    },
                    {
                        "lat": 35.45932298,
                        "lon": 129.4931158
                    },
                    {
                        "lat": 35.47242888,
                        "lon": 129.4960572
                    },
                    {
                        "lat": 35.48540856,
                        "lon": 129.4993426
                    },
                    {
                        "lat": 35.49826007,
                        "lon": 129.5029655
                    },
                    {
                        "lat": 35.51106645,
                        "lon": 129.5066921
                    },
                    {
                        "lat": 35.52390945,
                        "lon": 129.5102922
                    },
                    {
                        "lat": 35.53681883,
                        "lon": 129.5136886
                    },
                    {
                        "lat": 35.54975967,
                        "lon": 129.5169941
                    },
                    {
                        "lat": 35.56269298,
                        "lon": 129.5203337
                    },
                    {
                        "lat": 35.57558809,
                        "lon": 129.5238051
                    },
                    {
                        "lat": 35.58844913,
                        "lon": 129.5273935
                    },
                    {
                        "lat": 35.60128937,
                        "lon": 129.531054
                    },
                    {
                        "lat": 35.61412186,
                        "lon": 129.5347426
                    },
                    {
                        "lat": 35.62695586,
                        "lon": 129.5384272
                    },
                    {
                        "lat": 35.63979723,
                        "lon": 129.5420862
                    },
                    {
                        "lat": 35.65265174,
                        "lon": 129.5456983
                    },
                    {
                        "lat": 35.66552109,
                        "lon": 129.5492571
                    },
                    {
                        "lat": 35.67839544,
                        "lon": 129.5527979
                    },
                    {
                        "lat": 35.69126291,
                        "lon": 129.5563637
                    },
                    {
                        "lat": 35.70411329,
                        "lon": 129.5599912
                    },
                    {
                        "lat": 35.71695433,
                        "lon": 129.5636523
                    },
                    {
                        "lat": 35.72980493,
                        "lon": 129.5672782
                    },
                    {
                        "lat": 35.74268404,
                        "lon": 129.5708004
                    },
                    {
                        "lat": 35.75559543,
                        "lon": 129.574205
                    },
                    {
                        "lat": 35.76851339,
                        "lon": 129.5775854
                    },
                    {
                        "lat": 35.78140878,
                        "lon": 129.5810471
                    },
                    {
                        "lat": 35.79425838,
                        "lon": 129.5846744
                    },
                    {
                        "lat": 35.80708049,
                        "lon": 129.5884017
                    },
                    {
                        "lat": 35.81991124,
                        "lon": 129.5920986
                    },
                    {
                        "lat": 35.83278646,
                        "lon": 129.5956359
                    },
                    {
                        "lat": 35.84572541,
                        "lon": 129.598937
                    },
                    {
                        "lat": 35.85872478,
                        "lon": 129.6019971
                    },
                    {
                        "lat": 35.87177962,
                        "lon": 129.6048167
                    },
                    {
                        "lat": 35.88488364,
                        "lon": 129.6074027
                    },
                    {
                        "lat": 35.89802413,
                        "lon": 129.609792
                    },
                    {
                        "lat": 35.91118656,
                        "lon": 129.6120305
                    },
                    {
                        "lat": 35.92435693,
                        "lon": 129.6141639
                    },
                    {
                        "lat": 35.93753339,
                        "lon": 129.6162347
                    },
                    {
                        "lat": 35.95072582,
                        "lon": 129.6182828
                    },
                    {
                        "lat": 35.96394456,
                        "lon": 129.6203476
                    },
                    {
                        "lat": 35.97719781,
                        "lon": 129.6223593
                    },
                    {
                        "lat": 35.99048712,
                        "lon": 129.6239087
                    },
                    {
                        "lat": 36.00381277,
                        "lon": 129.6245217
                    },
                    {
                        "lat": 36.01716467,
                        "lon": 129.623752
                    },
                    {
                        "lat": 36.03041192,
                        "lon": 129.6214767
                    },
                    {
                        "lat": 36.04334569,
                        "lon": 129.6177818
                    },
                    {
                        "lat": 36.05575597,
                        "lon": 129.6127564
                    },
                    {
                        "lat": 36.06745806,
                        "lon": 129.6064207
                    },
                    {
                        "lat": 36.0783226,
                        "lon": 129.5986447
                    },
                    {
                        "lat": 36.0882275,
                        "lon": 129.5892783
                    },
                    {
                        "lat": 36.0969363,
                        "lon": 129.5782535
                    },
                    {
                        "lat": 36.10345244,
                        "lon": 129.5660475
                    },
                    {
                        "lat": 36.10646945,
                        "lon": 129.5533597
                    },
                    {
                        "lat": 36.10495304,
                        "lon": 129.5408249
                    },
                    {
                        "lat": 36.0994838,
                        "lon": 129.528693
                    },
                    {
                        "lat": 36.09123375,
                        "lon": 129.5170729
                    },
                    {
                        "lat": 36.08137579,
                        "lon": 129.5060732
                    },
                    {
                        "lat": 36.0710828,
                        "lon": 129.4958026
                    },
                    {
                        "lat": 36.06152768,
                        "lon": 129.4863698
                    },
                    {
                        "lat": 36.05388333,
                        "lon": 129.4778833
                    }
                ]
            }
        ]
    };

    // 출발항 정보 추가
    const departurePort = { "id": "KRBUS", "country": "한국", "city": "부산", "lat": 35.0999, "lon": 129.111 };

    // 화면 UI 업데이트 (슬라이드에 데이터 반영)
    displayPredictionResults(resp.latest.predictions, departurePort);
    displayTimelineResults(resp.timeline, resp.latest, departurePort);

    // 결과 영역 보이기 및 폼 입력 비활성화
    $('.sidebar__content').removeClass('is-hidden');
    $('.sidebar__input')
        .blur()
        .prop('disabled', true)
        .attr('aria-disabled', 'true')
        .addClass('is-locked');
    $('.cselect__control').prop('disabled', true);

    // ----------------------------------------------------
    // 지도에 항로 및 마커 그리기 로직
    // ----------------------------------------------------
    const routeCoordinates = [];
    const markers = [];
    let lastMarker = null;

    // 1. rank가 1인 항로 데이터 추출
    const topRouteData = resp.tracks_topk.find(trackObj => trackObj.rank === 1);
    const trackPoints = topRouteData ? topRouteData.track : [];

    if (trackPoints.length > 0) {
        // 항로 좌표 추출
        trackPoints.forEach(point => {
            routeCoordinates.push([point.lon, point.lat]);
        });

        // 2. time_point에 해당하는 마커 지점 추출
        const markerTimePoints = [5, 8, 11, 14, 17, 20, 23, 26, 29];
        const validMarkers = [];

        markerTimePoints.forEach(timePoint => {
            const point = trackPoints.find(p => p.time_point === timePoint);
            if (point) {
                validMarkers.push({
                    coordinates: [point.lon, point.lat],
                    description: `예측 시점: ${point.time_point}h`
                });
            }
        });

        // 3. 마지막 마커 분리
        if (validMarkers.length > 0) {
            lastMarker = validMarkers.pop();
            const arrivalPortId = resp.latest.predictions[0].port_id;
            lastMarker.description = `예상 도착항: ${arrivalPortId}`;
        }
    }

    // 항로에 출발항 좌표 추가
    if (departurePort) {
        routeCoordinates.unshift([departurePort.lon, departurePort.lat]);
    }

    const routes = [{
        route_name: '예상 항로 (Top 1)',
        coordinates: routeCoordinates
    }];

    // 4. 지도 함수 호출
    if (typeof window.drawRoutes === 'function' && typeof window.drawMarkers === 'function') {
        window.drawRoutes(routes);
        window.drawMarkers(validMarkers, lastMarker);
    } else {
        console.error("Map functions are not available.");
    }
});


// 초기화 버튼 : 페이지 최초 상태로 되돌리기
$(document).on('click', '.sidebar__row .sidebar__btn:not(.primary)', function () {
    // 1) 입력값 비우기
    $('.sidebar__input').val('');

    // 2) 셀렉트(MMSI)로 복구
    const $wrap = $('.cselect');
    $wrap.find('.cselect__option').attr('aria-selected', 'false');
    $wrap.find('.cselect__option[data-value="MMSI"]').attr('aria-selected', 'true');
    $wrap.find('.cselect__value').text('MMSI').attr('data-value', 'MMSI');

    // hidden input 값도 복구
    const name = $wrap.data('name'); // 예: idType
    let $hidden = $wrap.find(`input[type="hidden"][name="${name}"]`);
    if (!$hidden.length) {
        $hidden = $('<input>', { type: 'hidden', name });
        $wrap.append($hidden);
    }
    $hidden.val('MMSI');

    // 드롭다운 닫기
    $wrap.removeClass('is-open').find('.cselect__control').attr('aria-expanded', 'false');

    // 3) 결과 영역 숨기고 스크롤 상단으로
    const $content = $('.sidebar__content');
    $content.scrollTop(0).addClass('is-hidden');

    $('.sidebar__input')
        .prop('disabled', false)
        .removeAttr('aria-disabled')
        .removeClass('is-locked');
    $('.cselect__control').prop('disabled', false);     // 셀렉트 해제
    // 지도에서 항로와 마커 지우기
    window.clearRoutesAndMarkers();
});

// ───────── 추가된 기능: JSON 데이터를 화면에 표시 ─────────
function displayPredictionResults(predictions) {
    if (!predictions || predictions.length === 0) return;

    // 예측 결과 박스 업데이트
    const boxSelectors = ['.box.one', '.box.two', '.box.three'];
    predictions.forEach((prediction, index) => {
        if (boxSelectors[index]) {
            const $box = $(boxSelectors[index]);
            // box__head 안에 head__label을 rank로 대체
            $box.find('.head__label.num').text(`${prediction.rank}`);
            // box__head 안에 strong을 prob로 대체 (소수점 4자리까지 표시)
            $box.find('.box__head strong').text(`${(prediction.prob * 100).toFixed(2)}%`);
            // last를 port_id로 대체
            $box.find('.last').text(prediction.port_id);
        }
    });
}

// ───────── 추가된 기능 끝 ─────────


// 간단 토글 + 선택 저장
$(document).on('click', '.cselect__control', function () {
    const $wrap = $(this).closest('.cselect');
    const open = $wrap.toggleClass('is-open').hasClass('is-open');
    $(this).attr('aria-expanded', open);
});

// 옵션 클릭
$(document).on('click', '.cselect__option', function () {
    const $opt = $(this);
    const $wrap = $opt.closest('.cselect');
    const value = $opt.data('value');
    const text = $opt.text();

    // 값/표시 업데이트
    $wrap.find('.cselect__option').attr('aria-selected', 'false');
    $opt.attr('aria-selected', 'true');
    $wrap.find('.cselect__value').text(text).attr('data-value', value);

    // hidden input에 값 저장 (form 전송용)
    const name = $wrap.data('name');
    let $hidden = $wrap.find('input[type="hidden"][name="' + name + '"]');
    if (!$hidden.length) {
        $hidden = $('<input>', { type: 'hidden', name });
        $wrap.append($hidden);
    }
    $hidden.val(value);

    // 닫기
    $wrap.removeClass('is-open').find('.cselect__control').attr('aria-expanded', 'false');
});

// 바깥 클릭 시 닫기
$(document).on('click', function (e) {
    if ($(e.target).closest('.cselect').length === 0) {
        $('.cselect.is-open').removeClass('is-open').find('.cselect__control').attr('aria-expanded', 'false');
    }
});

// 아이콘 
// 초기: predict가 기본 활성
$(function () {
    // predict 탭/패널 기본 활성
    $('.sidebar__topbox .iconwrap[data-panel="predict"]').addClass('is-active');
    $('.panel--predict').addClass('is-active');
});

// 상단 아이콘(버튼) 클릭 → 패널 전환 + 활성 표시
$(document).on('click', '.sidebar__topbox .iconwrap', function () {
    const target = $(this).data('panel'); // 'predict' | 'log'

    // 탭 활성 토글
    $('.sidebar__topbox .iconwrap').removeClass('is-active');
    $(this).addClass('is-active');

    // 패널 전환 (is-active + hidden 속성 토글)
    $('.panel').removeClass('is-active').attr('hidden', true);
    $(`.panel--${target}`).addClass('is-active').removeAttr('hidden');

    // mapbox 리사이즈
    window.dispatchEvent(new Event('resize'));
});



// 아이콘 버튼 클릭 → ON/OFF 토글 + 커스텀 이벤트 알림
document.addEventListener('click', (e) => {
    const btn = e.target.closest('.map-icon-ctrl .iconbtn');
    if (!btn) return;

    const type = btn.dataset.type;            // 'map' | 'congestion' | 'weather'
    const on = !btn.classList.contains('is-on');

    btn.classList.toggle('is-on', on);

    // 기존 로직과 동일: 외부에서 듣고 레이어 on/off 처리
    document.dispatchEvent(new CustomEvent('panel:toggle', {
        detail: { type, on }
    }));
});

/* 예시: 버튼에 따라 동작 다르게 처리 할 경우
document.addEventListener('panel:toggle', (e) => {
  const { type, on } = e.detail;
  if (type === 'map') {
    // 지도 스타일 토글 처리
  } else if (type === 'congestion') {
    // 혼잡도 레이어 on/off
  } else if (type === 'weather') {
    // 날씨 레이어 on/off
  }
});
*/



// --------------- 로그 슬라이드 영역 기능 추가

// timeline 데이터를 화면에 표시하는 기능
function displayTimelineResults(timeline, latest) {
    // 1. 기존 타임라인 내용을 비웁니다.
    $('.voy-timeline').empty();

    if (!timeline || timeline.length === 0) {
        // 데이터가 없으면 빈 상태로 유지하거나, '데이터 없음' 메시지를 표시할 수 있습니다.
        // 예를 들어: $('.voy-timeline').append('<li>데이터가 없습니다.</li>');
        return;
    }

    // 부산항(출발항) 맨 위 고정
    const $startItem = $('<li class="voy-item"></li>');
    const $startNode = $(`<button class="voy-node" type="button" aria-pressed="false">
                            <img src="/images/portpredictImages/vessel_Icon.png" th:src="@{/images/portpredictImages/vessel_Icon.png}"
                                 alt="출발항 아이콘" />
                        </button>`);
    const $startRows = $('<div class="voy-rows"></div>');
    $startRows.append(`<div class="voy-label">KRBUS</div>`);

    const $startRow = $(`<div class="voy-row">
                             <div class="depart_pillbtn">ATD</div>
                             <div class="voy-chip">${latest.departure_time}</div>
                         </div>`);
    $startRows.append($startRow); // voy-rows에 voy-row 추가

    $startItem.append($startNode);
    $startItem.append($startRows);

    $('.voy-timeline').append($startItem);

    // timeline 루프 돌기
    timeline.forEach(timeData => {
        const timePoint = timeData.time_point;
        const timeStamp = timeData.time_stamp;
        const predictions = timeData.predictions;

        // 각 time_point에 대한 리스트 아이템(<li>) 생성
        const $timelineItem = $('<li class="voy-item"></li>');

        // 타임 노드 버튼 생성
        const $voyNode = $(`<button class="voy-node" type="button" aria-pressed="false">
                                <img src="/images/portpredictImages/marker.png" th:src="@{/images/portpredictImages/marker.png}"
                                     alt="마커 아이콘" />
                            </button>`);
        $timelineItem.append($voyNode);

        // 시간 정보와 예측 결과 컨테이너 생성
        const $voyRows = $('<div class="voy-rows"></div>');
        $voyRows.append(`<div class="voy-label">출항 후 ${timePoint}시간</div>`);

        // 예측 결과 (predictions) 목록 생성
        if (predictions && predictions.length > 0) {
            predictions.forEach(prediction => {
                const $predictionRow = $(`
                    <div class="voy-row">
                        <button class="pillbtn" type="button">Top-${prediction.rank}</button>
                        <div class="voy-chip">${prediction.port_id} · ${(prediction.prob * 100).toFixed(2)}%</div>
                    </div>
                `);
                $voyRows.append($predictionRow);
            });
        }
        $timelineItem.append($voyRows);

        // 완성된 타임라인 항목을 ol 태그에 추가
        $('.voy-timeline').append($timelineItem);
    });

    // --------------- 현재 시점 정보 추가 (latest 객체 사용) ---------------
    if (latest && latest.time_point !== undefined && latest.predictions) {
        const $latestItem = $('<li class="voy-item"></li>');
        const $latestNode = $(`<button class="voy-node" type="button" aria-pressed="false">
                                    <img src="/images/portpredictImages/marker.png" th:src="@{/images/portpredictImages/marker.png}"
                                         alt="마커 아이콘" />
                               </button>`);
        $latestItem.append($latestNode);

        const $latestRows = $('<div class="voy-rows"></div>');
        $latestRows.append(`<div class="voy-label">현재 시점 (출항 후 ${latest.time_point}시간)</div>`);

        if (latest.predictions.length > 0) {
            latest.predictions.forEach(prediction => {
                const $predictionRow = $(`
                    <div class="voy-row">
                        <button class="pillbtn" type="button">Top-${prediction.rank}</button>
                        <div class="voy-chip">${prediction.port_id} · ${(prediction.prob * 100).toFixed(2)}%</div>
                    </div>
                `);
                $latestRows.append($predictionRow);
            });
        }
        $latestRows.append(`<div class="voy-row"></div>`);
        $latestItem.append($latestRows);
        $('.voy-timeline').append($latestItem);
    }

    // --------------- 현재 시점 정보 추가 끝 ---------------
}

// --------------- 로그 슬라이드 영역 기능 끝

// 2) 슬라이드 원형 : 회색 <-> 파랑 + 팝 애니메이션
$(document).on('click', '.voy-node', function () {
    const $node = $(this);

    // 색상/상태 토글 (기존 동작)
    $node.toggleClass('is-active');

    // --- 클릭 팝 애니메이션 ---
    $node.addClass('is-pop');              // scale up
    const prev = $node.data('popTimer');   // 이전 타이머 있으면 정리
    if (prev) clearTimeout(prev);
    const timer = setTimeout(() => {
        $node.removeClass('is-pop');       // 원래 크기로 복귀
    }, 180); // CSS transition 시간과 비슷하게
    $node.data('popTimer', timer);
});




// 조회가 끝났는지 여부를 판단하는 헬퍼
function hasPredictResult() {
    // 조회 후 결과 영역이 열려 있으면 true
    return !$('#sidebar-content').hasClass('is-hidden');
}

// 모달 제어
function openSaveModal() {
    $('#saveModal').addClass('is-open').attr('aria-hidden', 'false');
}
function closeSaveModal() {
    $('#saveModal').removeClass('is-open').attr('aria-hidden', 'true');
}

// [결과 저장] 클릭
$(document).on('click', '.sidebar__btn.save', function () {
    if (!hasPredictResult()) {
        alert('먼저 [조회]를 실행해 결과를 확인한 뒤 저장버튼을 클릭해주세요.');
        return;
    }
    openSaveModal();
});

// 모달: 아니오
$(document).on('click', '#saveModal [data-action="no"]', function () {
    // 그냥 닫고, 화면/데이터는 그대로 유지
    closeSaveModal();
});

// 모달: 바깥 클릭으로 닫기
$(document).on('click', '#saveModal .modal__bg, #saveModal [data-action="close"]', function () {
    closeSaveModal();
});

// 모달: ESC로 닫기
$(document).on('keydown', function (e) {
    if (e.key === 'Escape' && $('#saveModal').hasClass('is-open')) {
        closeSaveModal();
    }
});

// 모달: 예 → (테스트) 저장 완료 알림 후 그대로 유지
$(document).on('click', '#saveModal [data-action="yes"]', function () {
    closeSaveModal();

    // 실제 저장 API가 붙기 전 임시 처리
    // ※ 여기서 AJAX 붙이면 됨. 성공 콜백에서 아래 alert 실행.
    setTimeout(function () {
        alert('저장되었습니다. "마이페이지 > 내 선박 정보" 에서 확인하세요.');
    }, 50);
});

