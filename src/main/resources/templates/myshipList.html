<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>내 선박 저장</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <script defer th:src="@{/js/header.js}"></script>

    <link rel="stylesheet" href="/css/myshipList.css" th:href="@{/css/myshipList.css}">

    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/faq.css}">
    <script defer th:src="@{/js/faq.js}"></script>
</head>

<body>
    <div sec:authorize="isAnonymous()">
        <div th:replace="~{fragment/header :: bu3_navigation}"></div>
    </div>
    <div sec:authorize="isAuthenticated()">
        <div th:replace="~{fragment/headerJoin :: bu3_navigation_join}"></div>
    </div>

    <div class="qna-header-bg">
        <section class="qna-header">
            <h2>내 선박 저장</h2>
            <p>마이페이지 > 내 선박 저장</p>
        </section>
    </div>

    <div class="table-wrap">
        <table class="tbl">
            <thead>
                <tr>
                    <th>번호</th>
                    <th>선박 번호</th>
                    <th>위도</th>
                    <th>경도</th>
                    <th>TOP1 항구명</th>
                    <th>확률</th>
                    <th>ETA</th>
                    <th>재검색</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="ship, stat : ${shipList}">
                    <td th:text="${stat.count}">1</td>
                    <td th:text="${ship.searchVsl}">112233</td>
                    <td th:text="${ship.lat == 0 ? '없음' : #numbers.formatDecimal(ship.lat,1,6)}">31.14567</td>
                    <td th:text="${ship.lon == 0 ? '없음' : #numbers.formatDecimal(ship.lon,1,6)}">127.9872</td>
                    <td th:text="${ship.top1Port != null ? ship.top1Port : '없음'}">VNHPH</td>
                    <td th:text="${ship.top1Pred != null ? #numbers.formatDecimal(ship.top1Pred * 100,1,2) + '%' : '없음'}">88%</td>
                    <td th:text="${ship.eta != null ? #temporals.format(ship.eta, 'yyyy-MM-dd HH:mm:ss') : '없음'}">2025-08-31</td>
                    <td>
                        <button class="btn-search-again" type="button"
                            th:attr="data-id=${ship.saveSeq}"
                            th:href="@{/predict(idValue=${ship.searchVsl})}">재검색</button>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(shipList)}">
                    <td colspan="9">저장된 선박이 없습니다.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="back-link-container">
        <a th:href="@{/mypage/main}" class="back-link">← 마이페이지로 돌아가기</a>
    </div>

    <div th:replace="~{/fragment/footer::footer(title='부3갈매기')}"></div>
    <div th:replace="~{fragment/faq :: widget}"></div>

</body>

</html>